(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{777:function(a,l,d){"use strict";d.r(l);var t=d(1),o=Object(t.a)({},(function(){var a=this,l=a.$createElement,d=a._self._c||l;return d("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[d("h1",{attrs:{id:"messages"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[a._v("#")]),a._v(" Messages")]),a._v(" "),d("h2",{attrs:{id:"msgwithdrawdelegationrewardsall"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#msgwithdrawdelegationrewardsall"}},[a._v("#")]),a._v(" MsgWithdrawDelegationRewardsAll")]),a._v(" "),d("p",[a._v("When a delegator wishes to withdraw their rewards it must send\n"),d("code",[a._v("MsgWithdrawDelegationRewardsAll")]),a._v(". Note that parts of this transaction logic are also\ntriggered each with any change in individual delegations, such as an unbond,\nredelegation, or delegation of additional tokens to a specific validator.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNc2dXaXRoZHJhd0RlbGVnYXRpb25SZXdhcmRzQWxsIHN0cnVjdCB7CiAgICBEZWxlZ2F0b3JBZGRyIHNkay5BY2NBZGRyZXNzCn0KCmZ1bmMgV2l0aGRyYXdEZWxlZ2F0aW9uUmV3YXJkc0FsbChkZWxlZ2F0b3JBZGRyLCB3aXRoZHJhd0FkZHIgc2RrLkFjY0FkZHJlc3MpIAogICAgaGVpZ2h0ID0gR2V0SGVpZ2h0KCkKICAgIHdpdGhkcmF3ID0gR2V0RGVsZWdhdG9yUmV3YXJkc0FsbChkZWxlZ2F0b3JBZGRyLCBoZWlnaHQpCiAgICBTZW5kQ29pbnMoZGlzdHJpYnV0aW9uTW9kdWxlQWNjLCB3aXRoZHJhd0FkZHIsIHdpdGhkcmF3LlRydW5jYXRlRGVjaW1hbCgpKQoKZnVuYyBHZXREZWxlZ2F0b3JSZXdhcmRzQWxsKGRlbGVnYXRvckFkZHIgc2RrLkFjY0FkZHJlc3MsIGhlaWdodCBpbnQ2NCkgRGVjQ29pbnMKICAgIAogICAgLy8gZ2V0IGFsbCBkaXN0cmlidXRpb24gc2NlbmFyaW9zCiAgICBkZWxlZ2F0aW9ucyA9IEdldERlbGVnYXRpb25zKGRlbGVnYXRvckFkZHIpCiAgICAgICAgCiAgICAvLyBjb2xsZWN0IGFsbCBlbnRpdGxlZCByZXdhcmRzCiAgICB3aXRoZHJhdyA9IDAKICAgIHBvb2wgPSBzdGFraW5nLkdldFBvb2woKSAKICAgIGZlZVBvb2wgPSBHZXRGZWVQb29sKCkgCiAgICBmb3IgZGVsZWdhdGlvbiA9IHJhbmdlIGRlbGVnYXRpb25zIAogICAgICAgIGRlbEluZm8gPSBHZXREZWxlZ2F0aW9uRGlzdEluZm8oZGVsZWdhdGlvbi5EZWxlZ2F0b3JBZGRyLAogICAgICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0aW9uLlZhbGlkYXRvckFkZHIpCiAgICAgICAgdmFsSW5mbyA9IEdldFZhbGlkYXRvckRpc3RJbmZvKGRlbGVnYXRpb24uVmFsaWRhdG9yQWRkcikKICAgICAgICB2YWxpZGF0b3IgPSBHZXRWYWxpZGF0b3IoZGVsZWdhdGlvbi5WYWxpZGF0b3JBZGRyKQoKICAgICAgICBmZWVQb29sLCBkaVdpdGhkcmF3ID0gZGVsSW5mby5XaXRoZHJhd1Jld2FyZHMoZmVlUG9vbCwgdmFsSW5mbywgaGVpZ2h0LCBwb29sLkJvbmRlZFRva2VucywgCiAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3IuVG9rZW5zLCB2YWxpZGF0b3IuRGVsZWdhdG9yU2hhcmVzLCB2YWxpZGF0b3IuQ29tbWlzc2lvbikKICAgICAgICB3aXRoZHJhdyArPSBkaVdpdGhkcmF3CgogICAgU2V0RmVlUG9vbChmZWVQb29sKSAKICAgIHJldHVybiB3aXRoZHJhdwo="}}),a._v(" "),d("h2",{attrs:{id:"msgwithdrawdelegationreward"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#msgwithdrawdelegationreward"}},[a._v("#")]),a._v(" MsgWithdrawDelegationReward")]),a._v(" "),d("p",[a._v("under special circumstances a delegator may wish to withdraw rewards from only\na single validator.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNc2dXaXRoZHJhd0RlbGVnYXRpb25SZXdhcmQgc3RydWN0IHsKICAgIERlbGVnYXRvckFkZHIgc2RrLkFjY0FkZHJlc3MKICAgIFZhbGlkYXRvckFkZHIgc2RrLlZhbEFkZHJlc3MKfQoKZnVuYyBXaXRoZHJhd0RlbGVnYXRpb25SZXdhcmQoZGVsZWdhdG9yQWRkciwgdmFsaWRhdG9yQWRkciwgd2l0aGRyYXdBZGRyIHNkay5BY2NBZGRyZXNzKSAKICAgIGhlaWdodCA9IEdldEhlaWdodCgpCiAgICAKICAgIC8vIGdldCBhbGwgZGlzdHJpYnV0aW9uIHNjZW5hcmlvcwogICAgcG9vbCA9IHN0YWtpbmcuR2V0UG9vbCgpIAogICAgZmVlUG9vbCA9IEdldEZlZVBvb2woKSAKICAgIGRlbEluZm8gPSBHZXREZWxlZ2F0aW9uRGlzdEluZm8oZGVsZWdhdG9yQWRkciwKICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3JBZGRyKQogICAgdmFsSW5mbyA9IEdldFZhbGlkYXRvckRpc3RJbmZvKHZhbGlkYXRvckFkZHIpCiAgICB2YWxpZGF0b3IgPSBHZXRWYWxpZGF0b3IodmFsaWRhdG9yQWRkcikKCiAgICBmZWVQb29sLCB3aXRoZHJhdyA9IGRlbEluZm8uV2l0aGRyYXdSZXdhcmRzKGZlZVBvb2wsIHZhbEluZm8sIGhlaWdodCwgcG9vbC5Cb25kZWRUb2tlbnMsIAogICAgICAgICAgICAgICB2YWxpZGF0b3IuVG9rZW5zLCB2YWxpZGF0b3IuRGVsZWdhdG9yU2hhcmVzLCB2YWxpZGF0b3IuQ29tbWlzc2lvbikKCiAgICBTZXRGZWVQb29sKGZlZVBvb2wpIAogICAgU2VuZENvaW5zKGRpc3RyaWJ1dGlvbk1vZHVsZUFjYywgd2l0aGRyYXdBZGRyLCB3aXRoZHJhdy5UcnVuY2F0ZURlY2ltYWwoKSkK"}}),a._v(" "),d("h2",{attrs:{id:"msgwithdrawvalidatorrewardsall"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#msgwithdrawvalidatorrewardsall"}},[a._v("#")]),a._v(" MsgWithdrawValidatorRewardsAll")]),a._v(" "),d("p",[a._v("When a validator wishes to withdraw their rewards it must send\n"),d("code",[a._v("MsgWithdrawValidatorRewardsAll")]),a._v(". Note that parts of this transaction logic are also\ntriggered each with any change in individual delegations, such as an unbond,\nredelegation, or delegation of additional tokens to a specific validator. This\ntransaction withdraws the validators commission fee, as well as any rewards\nearning on their self-delegation.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNc2dXaXRoZHJhd1ZhbGlkYXRvclJld2FyZHNBbGwgc3RydWN0IHsKICAgIE9wZXJhdG9yQWRkciBzZGsuVmFsQWRkcmVzcyAvLyB2YWxpZGF0b3IgYWRkcmVzcyB0byB3aXRoZHJhdyBmcm9tIAp9CgpmdW5jIFdpdGhkcmF3VmFsaWRhdG9yUmV3YXJkc0FsbChvcGVyYXRvckFkZHIsIHdpdGhkcmF3QWRkciBzZGsuQWNjQWRkcmVzcykKCiAgICBoZWlnaHQgPSBHZXRIZWlnaHQoKQogICAgZmVlUG9vbCA9IEdldEZlZVBvb2woKSAKICAgIHBvb2wgPSBHZXRQb29sKCkgCiAgICBWYWxJbmZvID0gR2V0VmFsaWRhdG9yRGlzdEluZm8oZGVsZWdhdGlvbi5WYWxpZGF0b3JBZGRyKQogICAgdmFsaWRhdG9yID0gR2V0VmFsaWRhdG9yKGRlbGVnYXRpb24uVmFsaWRhdG9yQWRkcikKCiAgICAvLyB3aXRoZHJhdyBzZWxmLWRlbGVnYXRpb24KICAgIHdpdGhkcmF3ID0gR2V0RGVsZWdhdG9yUmV3YXJkc0FsbCh2YWxpZGF0b3IuT3BlcmF0b3JBZGRyLCBoZWlnaHQpCgogICAgLy8gd2l0aGRyYXdhbCB2YWxpZGF0b3IgY29tbWlzc2lvbiByZXdhcmRzCiAgICBmZWVQb29sLCBjb21taXNzaW9uID0gdmFsSW5mby5XaXRoZHJhd0NvbW1pc3Npb24oZmVlUG9vbCwgdmFsSW5mbywgaGVpZ2h0LCBwb29sLkJvbmRlZFRva2VucywgCiAgICAgICAgICAgICAgIHZhbGlkYXRvci5Ub2tlbnMsIHZhbGlkYXRvci5Db21taXNzaW9uKQogICAgd2l0aGRyYXcgKz0gY29tbWlzc2lvbgogICAgU2V0RmVlUG9vbChmZWVQb29sKSAKCiAgICBTZW5kQ29pbnMoZGlzdHJpYnV0aW9uTW9kdWxlQWNjLCB3aXRoZHJhd0FkZHIsIHdpdGhkcmF3LlRydW5jYXRlRGVjaW1hbCgpKQo="}}),a._v(" "),d("h2",{attrs:{id:"common-calculations"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#common-calculations"}},[a._v("#")]),a._v(" Common calculations")]),a._v(" "),d("h3",{attrs:{id:"update-total-validator-accum"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#update-total-validator-accum"}},[a._v("#")]),a._v(" Update total validator accum")]),a._v(" "),d("p",[a._v("The total amount of validator accum must be calculated in order to determine\nthe amount of pool tokens which a validator is entitled to at a particular\nblock. The accum is always additive to the existing accum. This term is to be\nupdated each time rewards are withdrawn from the system.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoZyBGZWVQb29sKSBVcGRhdGVUb3RhbFZhbEFjY3VtKGhlaWdodCBpbnQ2NCwgdG90YWxCb25kZWRUb2tlbnMgRGVjKSBGZWVQb29sCiAgICBibG9ja3MgPSBoZWlnaHQgLSBnLlRvdGFsVmFsQWNjdW1VcGRhdGVIZWlnaHQKICAgIGcuVG90YWxWYWxBY2N1bSArPSB0b3RhbERlbFNoYXJlcyAqIGJsb2NrcwogICAgZy5Ub3RhbFZhbEFjY3VtVXBkYXRlSGVpZ2h0ID0gaGVpZ2h0CiAgICByZXR1cm4gZwo="}}),a._v(" "),d("h3",{attrs:{id:"update-validator-s-accums"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#update-validator-s-accums"}},[a._v("#")]),a._v(" Update validator's accums")]),a._v(" "),d("p",[a._v("The total amount of delegator accum must be updated in order to determine the\namount of pool tokens which each delegator is entitled to, relative to the\nother delegators for that validator. The accum is always additive to\nthe existing accum. This term is to be updated each time a\nwithdrawal is made from a validator.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:" go",base64:"ZnVuYyAodmkgVmFsaWRhdG9yRGlzdEluZm8pIFVwZGF0ZVRvdGFsRGVsQWNjdW0oaGVpZ2h0IGludDY0LCB0b3RhbERlbFNoYXJlcyBEZWMpIFZhbGlkYXRvckRpc3RJbmZvCiAgICBibG9ja3MgPSBoZWlnaHQgLSB2aS5Ub3RhbERlbEFjY3VtVXBkYXRlSGVpZ2h0CiAgICB2aS5Ub3RhbERlbEFjY3VtICs9IHRvdGFsRGVsU2hhcmVzICogYmxvY2tzCiAgICB2aS5Ub3RhbERlbEFjY3VtVXBkYXRlSGVpZ2h0ID0gaGVpZ2h0CiAgICByZXR1cm4gdmkK"}}),a._v(" "),d("h3",{attrs:{id:"feepool-pool-to-validator-pool"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#feepool-pool-to-validator-pool"}},[a._v("#")]),a._v(" FeePool pool to validator pool")]),a._v(" "),d("p",[a._v("Every time a validator or delegator executes a withdrawal or the validator is\nthe proposer and receives new tokens, the relevant validator must move tokens\nfrom the passive global pool to their own pool. It is at this point that the\ncommission is withdrawn")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAodmkgVmFsaWRhdG9yRGlzdEluZm8pIFRha2VGZWVQb29sUmV3YXJkcyhnIEZlZVBvb2wsIGhlaWdodCBpbnQ2NCwgdG90YWxCb25kZWQsIHZkVG9rZW5zLCBjb21taXNzaW9uUmF0ZSBEZWMpICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aSBWYWxpZGF0b3JEaXN0SW5mbywgZyBGZWVQb29sKQoKICAgIGcuVXBkYXRlVG90YWxWYWxBY2N1bShoZWlnaHQsIHRvdGFsQm9uZGVkU2hhcmVzKQogICAgCiAgICAvLyB1cGRhdGUgdGhlIHZhbGlkYXRvcnMgcG9vbAogICAgYmxvY2tzID0gaGVpZ2h0IC0gdmkuRmVlUG9vbFdpdGhkcmF3YWxIZWlnaHQKICAgIHZpLkZlZVBvb2xXaXRoZHJhd2FsSGVpZ2h0ID0gaGVpZ2h0CiAgICBhY2N1bSA9IGJsb2NrcyAqIHZkVG9rZW5zCiAgICB3aXRoZHJhd2FsVG9rZW5zIDo9IGcuUG9vbCAqIGFjY3VtIC8gZy5Ub3RhbFZhbEFjY3VtIAogICAgY29tbWlzc2lvbiA6PSB3aXRoZHJhd2FsVG9rZW5zICogY29tbWlzc2lvblJhdGUKICAgIAogICAgZy5Ub3RhbFZhbEFjY3VtIC09IGFjY3VtbQogICAgdmkuUG9vbENvbW1pc3Npb24gKz0gY29tbWlzc2lvbgogICAgdmkuUG9vbENvbW1pc3Npb25GcmVlICs9IHdpdGhkcmF3YWxUb2tlbnMgLSBjb21taXNzaW9uCiAgICBnLlBvb2wgLT0gd2l0aGRyYXdhbFRva2VucwoKICAgIHJldHVybiB2aSwgZwo="}}),a._v(" "),d("h3",{attrs:{id:"delegation-reward-withdrawal"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#delegation-reward-withdrawal"}},[a._v("#")]),a._v(" Delegation reward withdrawal")]),a._v(" "),d("p",[a._v("For delegations (including validator's self-delegation) all rewards from reward\npool have already had the validator's commission taken away.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoZGkgRGVsZWdhdGlvbkRpc3RJbmZvKSBXaXRoZHJhd1Jld2FyZHMoZyBGZWVQb29sLCB2aSBWYWxpZGF0b3JEaXN0SW5mbywKICAgIGhlaWdodCBpbnQ2NCwgdG90YWxCb25kZWQsIHZkVG9rZW5zLCB0b3RhbERlbFNoYXJlcywgY29tbWlzc2lvblJhdGUgRGVjKSAoCiAgICBkaSBEZWxlZ2F0aW9uRGlzdEluZm8sIGcgRmVlUG9vbCwgd2l0aGRyYXduIERlY0NvaW5zKQoKICAgIHZpLlVwZGF0ZVRvdGFsRGVsQWNjdW0oaGVpZ2h0LCB0b3RhbERlbFNoYXJlcykgCiAgICBnID0gdmkuVGFrZUZlZVBvb2xSZXdhcmRzKGcsIGhlaWdodCwgdG90YWxCb25kZWQsIHZkVG9rZW5zLCBjb21taXNzaW9uUmF0ZSkgCiAgICAKICAgIGJsb2NrcyA9IGhlaWdodCAtIGRpLldpdGhkcmF3YWxIZWlnaHQKICAgIGRpLldpdGhkcmF3YWxIZWlnaHQgPSBoZWlnaHQKICAgIGFjY3VtID0gZGVsZWdhdG9yU2hhcmVzICogYmxvY2tzIAogICAgIAogICAgd2l0aGRyYXdhbFRva2VucyA6PSB2aS5Qb29sICogYWNjdW0gLyB2aS5Ub3RhbERlbEFjY3VtCiAgICB2aS5Ub3RhbERlbEFjY3VtIC09IGFjY3VtCgogICAgdmkuUG9vbCAtPSB3aXRoZHJhd2FsVG9rZW5zCiAgICB2aS5Ub3RhbERlbEFjY3VtIC09IGFjY3VtCiAgICByZXR1cm4gZGksIGcsIHdpdGhkcmF3YWxUb2tlbnMKCg=="}}),a._v(" "),d("h3",{attrs:{id:"validator-commission-withdrawal"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#validator-commission-withdrawal"}},[a._v("#")]),a._v(" Validator commission withdrawal")]),a._v(" "),d("p",[a._v("Commission is calculated each time rewards enter into the validator.")]),a._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAodmkgVmFsaWRhdG9yRGlzdEluZm8pIFdpdGhkcmF3Q29tbWlzc2lvbihnIEZlZVBvb2wsIGhlaWdodCBpbnQ2NCwgCiAgICAgICAgICB0b3RhbEJvbmRlZCwgdmRUb2tlbnMsIGNvbW1pc3Npb25SYXRlIERlYykgKAogICAgICAgICAgdmkgVmFsaWRhdG9yRGlzdEluZm8sIGcgRmVlUG9vbCwgd2l0aGRyYXduIERlY0NvaW5zKQoKICAgIGcgPSB2aS5UYWtlRmVlUG9vbFJld2FyZHMoZywgaGVpZ2h0LCB0b3RhbEJvbmRlZCwgdmRUb2tlbnMsIGNvbW1pc3Npb25SYXRlKSAKICAgIAogICAgd2l0aGRyYXdhbFRva2VucyA6PSB2aS5Qb29sQ29tbWlzc2lvbiAKICAgIHZpLlBvb2xDb21taXNzaW9uID0gMAoKICAgIHJldHVybiB2aSwgZywgd2l0aGRyYXdhbFRva2Vucwo="}})],1)}),[],!1,null,null,null);l.default=o.exports}}]);