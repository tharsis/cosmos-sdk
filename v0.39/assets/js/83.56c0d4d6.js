(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{685:function(e,t,o){"use strict";o.r(t);var a=o(1),c=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"anatomy-of-an-sdk-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#anatomy-of-an-sdk-application"}},[e._v("#")]),e._v(" Anatomy of an SDK Application")]),e._v(" "),o("h2",{attrs:{id:"node-client"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#node-client"}},[e._v("#")]),e._v(" Node Client")]),e._v(" "),o("p",[e._v("The Daemon, or "),o("RouterLink",{attrs:{to:"/core/node.html"}},[e._v("Full-Node Client")]),e._v(", is the core process of an SDK-based blockchain. Participants in the network run this process to initialize their state-machine, connect with other full-nodes and update their state-machine as new blocks come in.")],1),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"ICAgICAgICAgICAgICAgIF4gICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgXgogICAgICAgICAgICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICB8CiAgICAgICAgICAgICAgICB8ICB8ICBTdGF0ZS1tYWNoaW5lID0gQXBwbGljYXRpb24gIHwgIHwKICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgfCAgIEJ1aWx0IHdpdGggQ29zbW9zIFNESwogICAgICAgICAgICAgICAgfCAgfCAgICAgICAgICAgIF4gICAgICArICAgICAgICAgICB8ICB8CiAgICAgICAgICAgICAgICB8ICArLS0tLS0tLS0tLS0gfCBBQkNJIHwgLS0tLS0tLS0tLSsgIHYKICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgICArICAgICAgdiAgICAgICAgICAgfCAgXgogICAgICAgICAgICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICB8CkJsb2NrY2hhaW4gTm9kZSB8ICB8ICAgICAgICAgICBDb25zZW5zdXMgICAgICAgICAgIHwgIHwKICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgfAogICAgICAgICAgICAgICAgfCAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICB8ICAgVGVuZGVybWludCBDb3JlCiAgICAgICAgICAgICAgICB8ICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHwKICAgICAgICAgICAgICAgIHwgIHwgICAgICAgICAgIE5ldHdvcmtpbmcgICAgICAgICAgfCAgfAogICAgICAgICAgICAgICAgfCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICB8CiAgICAgICAgICAgICAgICB2ICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHYK"}}),e._v(" "),o("p",[e._v("The blockchain full-node presents itself as a binary, generally suffixed by "),o("code",[e._v("-d")]),e._v(' for "daemon" (e.g. '),o("code",[e._v("appd")]),e._v(" for "),o("code",[e._v("app")]),e._v(" or "),o("code",[e._v("gaiad")]),e._v(" for "),o("code",[e._v("gaia")]),e._v("). This binary is built by running a simple "),o("RouterLink",{attrs:{to:"/core/node.html#main-function"}},[o("code",[e._v("main.go")])]),e._v(" function placed in "),o("code",[e._v("./cmd/appd/")]),e._v(". This operation usually happens through the "),o("a",{attrs:{href:"#dependencies-and-makefile"}},[e._v("Makefile")]),e._v(".")],1),e._v(" "),o("p",[e._v("Once the main binary is built, the node can be started by running the "),o("RouterLink",{attrs:{to:"/core/node.html#start-command"}},[o("code",[e._v("start")]),e._v(" command")]),e._v(". This command function primarily does three things:")],1),e._v(" "),o("ol",[o("li",[e._v("Create an instance of the state-machine defined in "),o("a",{attrs:{href:"#core-application-file"}},[o("code",[e._v("app.go")])]),e._v(".")]),e._v(" "),o("li",[e._v("Initialize the state-machine with the latest known state, extracted from the "),o("code",[e._v("db")]),e._v(" stored in the "),o("code",[e._v("~/.appd/data")]),e._v(" folder. At this point, the state-machine is at height "),o("code",[e._v("appBlockHeight")]),e._v(".")]),e._v(" "),o("li",[e._v("Create and start a new Tendermint instance. Among other things, the node will perform a handshake with its peers. It will get the latest "),o("code",[e._v("blockHeight")]),e._v(" from them, and replay blocks to sync to this height if it is greater than the local "),o("code",[e._v("appBlockHeight")]),e._v(". If "),o("code",[e._v("appBlockHeight")]),e._v(" is "),o("code",[e._v("0")]),e._v(", the node is starting from genesis and Tendermint sends an "),o("code",[e._v("InitChain")]),e._v(" message via the ABCI to the "),o("code",[e._v("app")]),e._v(", which triggers the "),o("a",{attrs:{href:"#initchainer"}},[o("code",[e._v("InitChainer")])]),e._v(".")])]),e._v(" "),o("h2",{attrs:{id:"core-application-file"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#core-application-file"}},[e._v("#")]),e._v(" Core Application File")]),e._v(" "),o("p",[e._v("In general, the core of the state-machine is defined in a file called "),o("code",[e._v("app.go")]),e._v(". It mainly contains the "),o("strong",[e._v("type definition of the application")]),e._v(" and functions to "),o("strong",[e._v("create and initialize it")]),e._v(".")]),e._v(" "),o("h3",{attrs:{id:"type-definition-of-the-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#type-definition-of-the-application"}},[e._v("#")]),e._v(" Type Definition of the Application")]),e._v(" "),o("p",[e._v("The first thing defined in "),o("code",[e._v("app.go")]),e._v(" is the "),o("code",[e._v("type")]),e._v(" of the application. It is generally comprised of the following parts:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("A reference to "),o("RouterLink",{attrs:{to:"/core/baseapp.html"}},[o("code",[e._v("baseapp")])]),e._v(".")],1),e._v(" The custom application defined in "),o("code",[e._v("app.go")]),e._v(" is an extension of "),o("code",[e._v("baseapp")]),e._v(". When a transaction is relayed by Tendermint to the application, "),o("code",[e._v("app")]),e._v(" uses "),o("code",[e._v("baseapp")]),e._v("'s methods to route them to the appropriate module. "),o("code",[e._v("baseapp")]),e._v(" implements most of the core logic for the application, including all the "),o("a",{attrs:{href:"https://tendermint.com/docs/spec/abci/abci.html#overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("ABCI methods"),o("OutboundLink")],1),e._v(" and the "),o("RouterLink",{attrs:{to:"/core/baseapp.html#routing"}},[e._v("routing logic")]),e._v(".")],1),e._v(" "),o("li",[o("strong",[e._v("A list of store keys")]),e._v(". The "),o("RouterLink",{attrs:{to:"/core/store.html"}},[e._v("store")]),e._v(", which contains the entire state, is implemented as a "),o("RouterLink",{attrs:{to:"/core/store.html#multistore"}},[o("code",[e._v("multistore")])]),e._v(" (i.e. a store of stores) in the Cosmos SDK. Each module uses one or multiple stores in the multistore to persist their part of the state. These stores can be accessed with specific keys that are declared in the "),o("code",[e._v("app")]),e._v(" type. These keys, along with the "),o("code",[e._v("keepers")]),e._v(", are at the heart of the "),o("RouterLink",{attrs:{to:"/core/ocap.html"}},[e._v("object-capabilities model")]),e._v(" of the Cosmos SDK.")],1),e._v(" "),o("li",[o("strong",[e._v("A list of module's "),o("code",[e._v("keeper")]),e._v("s.")]),e._v(" Each module defines an abstraction called "),o("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[o("code",[e._v("keeper")])]),e._v(", which handles reads and writes for this module's store(s). The "),o("code",[e._v("keeper")]),e._v("'s methods of one module can be called from other modules (if authorized), which is why they are declared in the application's type and exported as interfaces to other modules so that the latter can only access the authorized functions.")],1),e._v(" "),o("li",[o("strong",[e._v("A reference to a "),o("RouterLink",{attrs:{to:"/core/encoding.html"}},[o("code",[e._v("codec")])]),e._v(".")],1),e._v(" The application's "),o("code",[e._v("codec")]),e._v(" is used to serialize and deserialize data structures in order to store them, as stores can only persist "),o("code",[e._v("[]bytes")]),e._v(". The "),o("code",[e._v("codec")]),e._v(" must be deterministic. The default codec is "),o("RouterLink",{attrs:{to:"/core/encoding.html"}},[e._v("amino")]),e._v(".")],1),e._v(" "),o("li",[o("strong",[e._v("A reference to a "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#manager"}},[e._v("module manager")])],1),e._v(" and a "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#basicmanager"}},[e._v("basic module manager")]),e._v(". The module manager is an object that contains a list of the application's module. It facilitates operations related to these modules, like registering "),o("RouterLink",{attrs:{to:"/core/baseapp.html#routing"}},[o("code",[e._v("routes")])]),e._v(", "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[e._v("query routes")]),e._v(" or setting the order of execution between modules for various functions like "),o("a",{attrs:{href:"#initchainer"}},[o("code",[e._v("InitChainer")])]),e._v(", "),o("a",{attrs:{href:"#beginblocker-and-endblocker"}},[o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")])]),e._v(".")],1)]),e._v(" "),o("p",[e._v("See an example of application type definition from "),o("a",{attrs:{href:"https://github.com/cosmos/gaia",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("gaia")]),o("OutboundLink")],1)]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBHYWlhQXBwIHN0cnVjdCB7CgkqYmFtLkJhc2VBcHAKCWNkYyAqY29kZWMuQ29kZWMKCglpbnZDaGVja1BlcmlvZCB1aW50CgoJLy8ga2V5cyB0byBhY2Nlc3MgdGhlIHN1YnN0b3JlcwoJa2V5cyAgbWFwW3N0cmluZ10qc2RrLktWU3RvcmVLZXkKCXRLZXlzIG1hcFtzdHJpbmddKnNkay5UcmFuc2llbnRTdG9yZUtleQoKCS8vIGtlZXBlcnMKCWFjY291bnRLZWVwZXIgIGF1dGguQWNjb3VudEtlZXBlcgoJYmFua0tlZXBlciAgICAgYmFuay5LZWVwZXIKCXN1cHBseUtlZXBlciAgIHN1cHBseS5LZWVwZXIKCXN0YWtpbmdLZWVwZXIgIHN0YWtpbmcuS2VlcGVyCglzbGFzaGluZ0tlZXBlciBzbGFzaGluZy5LZWVwZXIKCW1pbnRLZWVwZXIgICAgIG1pbnQuS2VlcGVyCglkaXN0cktlZXBlciAgICBkaXN0ci5LZWVwZXIKCWdvdktlZXBlciAgICAgIGdvdi5LZWVwZXIKCWNyaXNpc0tlZXBlciAgIGNyaXNpcy5LZWVwZXIKCXBhcmFtc0tlZXBlciAgIHBhcmFtcy5LZWVwZXIKCWV2aWRlbmNlS2VlcGVyICpldmlkZW5jZS5LZWVwZXIKCgkvLyB0aGUgbW9kdWxlIG1hbmFnZXIKCW1tICptb2R1bGUuTWFuYWdlcgoKCS8vIHNpbXVsYXRpb24gbWFuYWdlcgoJc20gKm1vZHVsZS5TaW11bGF0aW9uTWFuYWdlcgp9"}})],1),e._v(" "),o("h3",{attrs:{id:"constructor-function"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#constructor-function"}},[e._v("#")]),e._v(" Constructor Function")]),e._v(" "),o("p",[e._v("This function constructs a new application of the type defined in the section above. It must fulfill the "),o("code",[e._v("AppCreator")]),e._v(" signature in order to be used in the "),o("RouterLink",{attrs:{to:"/core/node.html#start-command"}},[o("code",[e._v("start")]),e._v(" command")]),e._v(" of the application's daemon command.")],1),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBzZXJ2ZXIKCmltcG9ydCAoCgkmcXVvdDtlbmNvZGluZy9qc29uJnF1b3Q7CgkmcXVvdDtpbyZxdW90OwoJJnF1b3Q7b3MmcXVvdDsKCSZxdW90O3BhdGgvZmlsZXBhdGgmcXVvdDsKCglhYmNpICZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L2FiY2kvdHlwZXMmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L2xpYnMvbG9nJnF1b3Q7Cgl0bXR5cGVzICZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L3R5cGVzJnF1b3Q7CglkYm0gJnF1b3Q7Z2l0aHViLmNvbS90ZW5kZXJtaW50L3RtLWRiJnF1b3Q7CgoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKKQoKdHlwZSAoCgkvLyBBcHBDcmVhdG9yIGlzIGEgZnVuY3Rpb24gdGhhdCBhbGxvd3MgdXMgdG8gbGF6aWx5IGluaXRpYWxpemUgYW4KCS8vIGFwcGxpY2F0aW9uIHVzaW5nIHZhcmlvdXMgY29uZmlndXJhdGlvbnMuCglBcHBDcmVhdG9yIGZ1bmMobG9nLkxvZ2dlciwgZGJtLkRCLCBpby5Xcml0ZXIpIGFiY2kuQXBwbGljYXRpb24KCgkvLyBBcHBFeHBvcnRlciBpcyBhIGZ1bmN0aW9uIHRoYXQgZHVtcHMgYWxsIGFwcCBzdGF0ZSB0bwoJLy8gSlNPTi1zZXJpYWxpemFibGUgc3RydWN0dXJlIGFuZCByZXR1cm5zIHRoZSBjdXJyZW50IHZhbGlkYXRvciBzZXQuCglBcHBFeHBvcnRlciBmdW5jKGxvZy5Mb2dnZXIsIGRibS5EQiwgaW8uV3JpdGVyLCBpbnQ2NCwgYm9vbCwgW11zdHJpbmcpIChqc29uLlJhd01lc3NhZ2UsIFtddG10eXBlcy5HZW5lc2lzVmFsaWRhdG9yLCBlcnJvcikKKQoKZnVuYyBvcGVuREIocm9vdERpciBzdHJpbmcpIChkYm0uREIsIGVycm9yKSB7CglkYXRhRGlyIDo9IGZpbGVwYXRoLkpvaW4ocm9vdERpciwgJnF1b3Q7ZGF0YSZxdW90OykKCWRiLCBlcnIgOj0gc2RrLk5ld0xldmVsREIoJnF1b3Q7YXBwbGljYXRpb24mcXVvdDssIGRhdGFEaXIpCglyZXR1cm4gZGIsIGVycgp9CgpmdW5jIG9wZW5UcmFjZVdyaXRlcih0cmFjZVdyaXRlckZpbGUgc3RyaW5nKSAodyBpby5Xcml0ZXIsIGVyciBlcnJvcikgewoJaWYgdHJhY2VXcml0ZXJGaWxlICE9ICZxdW90OyZxdW90OyB7CgkJdywgZXJyID0gb3MuT3BlbkZpbGUoCgkJCXRyYWNlV3JpdGVyRmlsZSwKCQkJb3MuT19XUk9OTFl8b3MuT19BUFBFTkR8b3MuT19DUkVBVEUsCgkJCTA2NjYsCgkJKQoJCXJldHVybgoJfQoJcmV0dXJuCn0K"}})],1),e._v(" "),o("p",[e._v("Here are the main actions performed by this function:")]),e._v(" "),o("ul",[o("li",[e._v("Instantiate a new "),o("RouterLink",{attrs:{to:"/core/encoding.html"}},[o("code",[e._v("codec")])]),e._v(" and initialize the "),o("code",[e._v("codec")]),e._v(" of each of the application's module using the "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#basicmanager"}},[e._v("basic manager")])],1),e._v(" "),o("li",[e._v("Instantiate a new application with a reference to a "),o("code",[e._v("baseapp")]),e._v(" instance, a codec and all the appropriate store keys.")]),e._v(" "),o("li",[e._v("Instantiate all the "),o("a",{attrs:{href:"#keeper"}},[o("code",[e._v("keeper")]),e._v("s")]),e._v(" defined in the application's "),o("code",[e._v("type")]),e._v(" using the "),o("code",[e._v("NewKeeper")]),e._v(" function of each of the application's modules. Note that "),o("code",[e._v("keepers")]),e._v(" must be instantiated in the correct order, as the "),o("code",[e._v("NewKeeper")]),e._v(" of one module might require a reference to another module's "),o("code",[e._v("keeper")]),e._v(".")]),e._v(" "),o("li",[e._v("Instantiate the application's "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#manager"}},[e._v("module manager")]),e._v(" with the "),o("a",{attrs:{href:"#application-module-interface"}},[o("code",[e._v("AppModule")])]),e._v(" object of each of the application's modules.")],1),e._v(" "),o("li",[e._v("With the module manager, initialize the application's "),o("RouterLink",{attrs:{to:"/core/baseapp.html#routing"}},[o("code",[e._v("routes")])]),e._v(" and "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[e._v("query routes")]),e._v(". When a transaction is relayed to the application by Tendermint via the ABCI, it is routed to the appropriate module's "),o("a",{attrs:{href:"#handler"}},[o("code",[e._v("handler")])]),e._v(" using the routes defined here. Likewise, when a query is received by the application, it is routed to the appropriate module's "),o("a",{attrs:{href:"#querier"}},[o("code",[e._v("querier")])]),e._v(" using the query routes defined here.")],1),e._v(" "),o("li",[e._v("With the module manager, register the "),o("RouterLink",{attrs:{to:"/building-modules/invariants.html"}},[e._v("application's modules' invariants")]),e._v(". Invariants are variables (e.g. total supply of a token) that are evaluated at the end of each block. The process of checking invariants is done via a special module called the "),o("RouterLink",{attrs:{to:"/building-modules/invariants.html#invariant-registry"}},[o("code",[e._v("InvariantsRegistry")])]),e._v(". The value of the invariant should be equal to a predicted value defined in the module. Should the value be different than the predicted one, special logic defined in the invariant registry will be triggered (usually the chain is halted). This is useful to make sure no critical bug goes unnoticed and produces long-lasting effects that would be hard to fix.")],1),e._v(" "),o("li",[e._v("With the module manager, set the order of execution between the "),o("code",[e._v("InitGenesis")]),e._v(", "),o("code",[e._v("BegingBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(" functions of each of the "),o("a",{attrs:{href:"#application-module-interface"}},[e._v("application's modules")]),e._v(". Note that not all modules implement these functions.")]),e._v(" "),o("li",[e._v("Set the remainer of application's parameters:\n"),o("ul",[o("li",[o("a",{attrs:{href:"#initchainer"}},[o("code",[e._v("InitChainer")])]),e._v(": used to initialize the application when it is first started.")]),e._v(" "),o("li",[o("a",{attrs:{href:"#beginblocker-and-endlbocker"}},[o("code",[e._v("BeginBlocker")]),e._v(", "),o("code",[e._v("EndBlocker")])]),e._v(": called at the beginning and the end of every block).")]),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/core/baseapp.html#antehandler"}},[o("code",[e._v("anteHandler")])]),e._v(": used to handle fees and signature verification.")],1)])]),e._v(" "),o("li",[e._v("Mount the stores.")]),e._v(" "),o("li",[e._v("Return the application.")])]),e._v(" "),o("p",[e._v("Note that this function only creates an instance of the app, while the actual state is either carried over from the "),o("code",[e._v("~/.appd/data")]),e._v(" folder if the node is restarted, or generated from the genesis file if the node is started for the first time.")]),e._v(" "),o("p",[e._v("See an example of application constructor from "),o("a",{attrs:{href:"https://github.com/cosmos/gaia",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("gaia")]),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CS8vIHNpbXVsYXRpb24gbWFuYWdlcgoJc20gKm1vZHVsZS5TaW11bGF0aW9uTWFuYWdlcgp9CgovLyBOZXdHYWlhQXBwIHJldHVybnMgYSByZWZlcmVuY2UgdG8gYW4gaW5pdGlhbGl6ZWQgR2FpYUFwcC4KZnVuYyBOZXdHYWlhQXBwKAoJbG9nZ2VyIGxvZy5Mb2dnZXIsIGRiIGRibS5EQiwgdHJhY2VTdG9yZSBpby5Xcml0ZXIsIGxvYWRMYXRlc3QgYm9vbCwKCWludkNoZWNrUGVyaW9kIHVpbnQsIGJhc2VBcHBPcHRpb25zIC4uLmZ1bmMoKmJhbS5CYXNlQXBwKSwKKSAqR2FpYUFwcCB7CgoJY2RjIDo9IE1ha2VDb2RlYygpCgoJYkFwcCA6PSBiYW0uTmV3QmFzZUFwcChhcHBOYW1lLCBsb2dnZXIsIGRiLCBhdXRoLkRlZmF1bHRUeERlY29kZXIoY2RjKSwgYmFzZUFwcE9wdGlvbnMuLi4pCgliQXBwLlNldENvbW1pdE11bHRpU3RvcmVUcmFjZXIodHJhY2VTdG9yZSkKCWJBcHAuU2V0QXBwVmVyc2lvbih2ZXJzaW9uLlZlcnNpb24pCgoJa2V5cyA6PSBzZGsuTmV3S1ZTdG9yZUtleXMoCgkJYmFtLk1haW5TdG9yZUtleSwgYXV0aC5TdG9yZUtleSwgc3Rha2luZy5TdG9yZUtleSwKCQlzdXBwbHkuU3RvcmVLZXksIG1pbnQuU3RvcmVLZXksIGRpc3RyLlN0b3JlS2V5LCBzbGFzaGluZy5TdG9yZUtleSwKCQlnb3YuU3RvcmVLZXksIHBhcmFtcy5TdG9yZUtleSwKCSkKCXRrZXlzIDo9IHNkay5OZXdUcmFuc2llbnRTdG9yZUtleXMoc3Rha2luZy5UU3RvcmVLZXksIHBhcmFtcy5UU3RvcmVLZXkpCgoJYXBwIDo9ICZhbXA7R2FpYUFwcHsKCQlCYXNlQXBwOiAgICAgICAgYkFwcCwKCQljZGM6ICAgICAgICAgICAgY2RjLAoJCWludkNoZWNrUGVyaW9kOiBpbnZDaGVja1BlcmlvZCwKCQlrZXlzOiAgICAgICAgICAga2V5cywKCQl0a2V5czogICAgICAgICAgdGtleXMsCgl9CgoJLy8gaW5pdCBwYXJhbXMga2VlcGVyIGFuZCBzdWJzcGFjZXMKCWFwcC5wYXJhbXNLZWVwZXIgPSBwYXJhbXMuTmV3S2VlcGVyKGFwcC5jZGMsIGtleXNbcGFyYW1zLlN0b3JlS2V5XSwgdGtleXNbcGFyYW1zLlRTdG9yZUtleV0sIHBhcmFtcy5EZWZhdWx0Q29kZXNwYWNlKQoJYXV0aFN1YnNwYWNlIDo9IGFwcC5wYXJhbXNLZWVwZXIuU3Vic3BhY2UoYXV0aC5EZWZhdWx0UGFyYW1zcGFjZSkKCWJhbmtTdWJzcGFjZSA6PSBhcHAucGFyYW1zS2VlcGVyLlN1YnNwYWNlKGJhbmsuRGVmYXVsdFBhcmFtc3BhY2UpCglzdGFraW5nU3Vic3BhY2UgOj0gYXBwLnBhcmFtc0tlZXBlci5TdWJzcGFjZShzdGFraW5nLkRlZmF1bHRQYXJhbXNwYWNlKQoJbWludFN1YnNwYWNlIDo9IGFwcC5wYXJhbXNLZWVwZXIuU3Vic3BhY2UobWludC5EZWZhdWx0UGFyYW1zcGFjZSkKCWRpc3RyU3Vic3BhY2UgOj0gYXBwLnBhcmFtc0tlZXBlci5TdWJzcGFjZShkaXN0ci5EZWZhdWx0UGFyYW1zcGFjZSkKCXNsYXNoaW5nU3Vic3BhY2UgOj0gYXBwLnBhcmFtc0tlZXBlci5TdWJzcGFjZShzbGFzaGluZy5EZWZhdWx0UGFyYW1zcGFjZSkKCWdvdlN1YnNwYWNlIDo9IGFwcC5wYXJhbXNLZWVwZXIuU3Vic3BhY2UoZ292LkRlZmF1bHRQYXJhbXNwYWNlKS5XaXRoS2V5VGFibGUoZ292LlBhcmFtS2V5VGFibGUoKSkKCWNyaXNpc1N1YnNwYWNlIDo9IGFwcC5wYXJhbXNLZWVwZXIuU3Vic3BhY2UoY3Jpc2lzLkRlZmF1bHRQYXJhbXNwYWNlKQoKCS8vIGFkZCBrZWVwZXJzCglhcHAuYWNjb3VudEtlZXBlciA9IGF1dGguTmV3QWNjb3VudEtlZXBlcihhcHAuY2RjLCBrZXlzW2F1dGguU3RvcmVLZXldLCBhdXRoU3Vic3BhY2UsIGF1dGguUHJvdG9CYXNlQWNjb3VudCkKCWFwcC5iYW5rS2VlcGVyID0gYmFuay5OZXdCYXNlS2VlcGVyKGFwcC5hY2NvdW50S2VlcGVyLCBiYW5rU3Vic3BhY2UsIGJhbmsuRGVmYXVsdENvZGVzcGFjZSwgYXBwLk1vZHVsZUFjY291bnRBZGRycygpKQoJYXBwLnN1cHBseUtlZXBlciA9IHN1cHBseS5OZXdLZWVwZXIoYXBwLmNkYywga2V5c1tzdXBwbHkuU3RvcmVLZXldLCBhcHAuYWNjb3VudEtlZXBlciwgYXBwLmJhbmtLZWVwZXIsIG1hY2NQZXJtcykKCXN0YWtpbmdLZWVwZXIgOj0gc3Rha2luZy5OZXdLZWVwZXIoCgkJYXBwLmNkYywga2V5c1tzdGFraW5nLlN0b3JlS2V5XSwgYXBwLnN1cHBseUtlZXBlciwgc3Rha2luZ1N1YnNwYWNlLCBzdGFraW5nLkRlZmF1bHRDb2Rlc3BhY2UsCgkpCglhcHAubWludEtlZXBlciA9IG1pbnQuTmV3S2VlcGVyKGFwcC5jZGMsIGtleXNbbWludC5TdG9yZUtleV0sIG1pbnRTdWJzcGFjZSwgJmFtcDtzdGFraW5nS2VlcGVyLCBhcHAuc3VwcGx5S2VlcGVyLCBhdXRoLkZlZUNvbGxlY3Rvck5hbWUpCglhcHAuZGlzdHJLZWVwZXIgPSBkaXN0ci5OZXdLZWVwZXIoYXBwLmNkYywga2V5c1tkaXN0ci5TdG9yZUtleV0sIGRpc3RyU3Vic3BhY2UsICZhbXA7c3Rha2luZ0tlZXBlciwKCQlhcHAuc3VwcGx5S2VlcGVyLCBkaXN0ci5EZWZhdWx0Q29kZXNwYWNlLCBhdXRoLkZlZUNvbGxlY3Rvck5hbWUsIGFwcC5Nb2R1bGVBY2NvdW50QWRkcnMoKSkKCWFwcC5zbGFzaGluZ0tlZXBlciA9IHNsYXNoaW5nLk5ld0tlZXBlcigKCQlhcHAuY2RjLCBrZXlzW3NsYXNoaW5nLlN0b3JlS2V5XSwgJmFtcDtzdGFraW5nS2VlcGVyLCBzbGFzaGluZ1N1YnNwYWNlLCBzbGFzaGluZy5EZWZhdWx0Q29kZXNwYWNlLAoJKQoJYXBwLmNyaXNpc0tlZXBlciA9IGNyaXNpcy5OZXdLZWVwZXIoY3Jpc2lzU3Vic3BhY2UsIGludkNoZWNrUGVyaW9kLCBhcHAuc3VwcGx5S2VlcGVyLCBhdXRoLkZlZUNvbGxlY3Rvck5hbWUpCgoJLy8gcmVnaXN0ZXIgdGhlIHByb3Bvc2FsIHR5cGVzCglnb3ZSb3V0ZXIgOj0gZ292Lk5ld1JvdXRlcigpCglnb3ZSb3V0ZXIuQWRkUm91dGUoZ292LlJvdXRlcktleSwgZ292LlByb3Bvc2FsSGFuZGxlcikuCgkJQWRkUm91dGUocGFyYW1zLlJvdXRlcktleSwgcGFyYW1zLk5ld1BhcmFtQ2hhbmdlUHJvcG9zYWxIYW5kbGVyKGFwcC5wYXJhbXNLZWVwZXIpKS4KCQlBZGRSb3V0ZShkaXN0ci5Sb3V0ZXJLZXksIGRpc3RyLk5ld0NvbW11bml0eVBvb2xTcGVuZFByb3Bvc2FsSGFuZGxlcihhcHAuZGlzdHJLZWVwZXIpKQoJYXBwLmdvdktlZXBlciA9IGdvdi5OZXdLZWVwZXIoCgkJYXBwLmNkYywga2V5c1tnb3YuU3RvcmVLZXldLCBnb3ZTdWJzcGFjZSwKCQlhcHAuc3VwcGx5S2VlcGVyLCAmYW1wO3N0YWtpbmdLZWVwZXIsIGdvdi5EZWZhdWx0Q29kZXNwYWNlLCBnb3ZSb3V0ZXIsCgkpCgoJLy8gcmVnaXN0ZXIgdGhlIHN0YWtpbmcgaG9va3MKCS8vIE5PVEU6IHN0YWtpbmdLZWVwZXIgYWJvdmUgaXMgcGFzc2VkIGJ5IHJlZmVyZW5jZSwgc28gdGhhdCBpdCB3aWxsIGNvbnRhaW4gdGhlc2UgaG9va3MKCWFwcC5zdGFraW5nS2VlcGVyID0gKnN0YWtpbmdLZWVwZXIuU2V0SG9va3MoCgkJc3Rha2luZy5OZXdNdWx0aVN0YWtpbmdIb29rcyhhcHAuZGlzdHJLZWVwZXIuSG9va3MoKSwgYXBwLnNsYXNoaW5nS2VlcGVyLkhvb2tzKCkpLAoJKQoKCS8vIE5PVEU6IEFueSBtb2R1bGUgaW5zdGFudGlhdGVkIGluIHRoZSBtb2R1bGUgbWFuYWdlciB0aGF0IGlzIGxhdGVyIG1vZGlmaWVkCgkvLyBtdXN0IGJlIHBhc3NlZCBieSByZWZlcmVuY2UgaGVyZS4KCWFwcC5tbSA9IG1vZHVsZS5OZXdNYW5hZ2VyKAoJCWdlbnV0aWwuTmV3QXBwTW9kdWxlKGFwcC5hY2NvdW50S2VlcGVyLCBhcHAuc3Rha2luZ0tlZXBlciwgYXBwLkJhc2VBcHAuRGVsaXZlclR4KSwKCQlhdXRoLk5ld0FwcE1vZHVsZShhcHAuYWNjb3VudEtlZXBlciksCgkJYmFuay5OZXdBcHBNb2R1bGUoYXBwLmJhbmtLZWVwZXIsIGFwcC5hY2NvdW50S2VlcGVyKSwKCQljcmlzaXMuTmV3QXBwTW9kdWxlKCZhbXA7YXBwLmNyaXNpc0tlZXBlciksCgkJc3VwcGx5Lk5ld0FwcE1vZHVsZShhcHAuc3VwcGx5S2VlcGVyLCBhcHAuYWNjb3VudEtlZXBlciksCgkJZGlzdHIuTmV3QXBwTW9kdWxlKGFwcC5kaXN0cktlZXBlciwgYXBwLnN1cHBseUtlZXBlciksCgkJZ292Lk5ld0FwcE1vZHVsZShhcHAuZ292S2VlcGVyLCBhcHAuc3VwcGx5S2VlcGVyKSwKCQltaW50Lk5ld0FwcE1vZHVsZShhcHAubWludEtlZXBlciksCgkJc2xhc2hpbmcuTmV3QXBwTW9kdWxlKGFwcC5zbGFzaGluZ0tlZXBlciwgYXBwLnN0YWtpbmdLZWVwZXIpLAoJCXN0YWtpbmcuTmV3QXBwTW9kdWxlKGFwcC5zdGFraW5nS2VlcGVyLCBhcHAuYWNjb3VudEtlZXBlciwgYXBwLnN1cHBseUtlZXBlciksCgkpCgoJLy8gRHVyaW5nIGJlZ2luIGJsb2NrIHNsYXNoaW5nIGhhcHBlbnMgYWZ0ZXIgZGlzdHIuQmVnaW5CbG9ja2VyIHNvIHRoYXQKCS8vIHRoZXJlIGlzIG5vdGhpbmcgbGVmdCBvdmVyIGluIHRoZSB2YWxpZGF0b3IgZmVlIHBvb2wsIHNvIGFzIHRvIGtlZXAgdGhlCgkvLyBDYW5XaXRoZHJhd0ludmFyaWFudCBpbnZhcmlhbnQuCglhcHAubW0uU2V0T3JkZXJCZWdpbkJsb2NrZXJzKG1pbnQuTW9kdWxlTmFtZSwgZGlzdHIuTW9kdWxlTmFtZSwgc2xhc2hpbmcuTW9kdWxlTmFtZSkKCglhcHAubW0uU2V0T3JkZXJFbmRCbG9ja2VycyhjcmlzaXMuTW9kdWxlTmFtZSwgZ292Lk1vZHVsZU5hbWUsIHN0YWtpbmcuTW9kdWxlTmFtZSkKCgkvLyBOT1RFOiBUaGUgZ2VudXRpbHMgbW9kdWxlIG11c3Qgb2NjdXIgYWZ0ZXIgc3Rha2luZyBzbyB0aGF0IHBvb2xzIGFyZQoJLy8gcHJvcGVybHkgaW5pdGlhbGl6ZWQgd2l0aCB0b2tlbnMgZnJvbSBnZW5lc2lzIGFjY291bnRzLgoJYXBwLm1tLlNldE9yZGVySW5pdEdlbmVzaXMoCgkJZGlzdHIuTW9kdWxlTmFtZSwgc3Rha2luZy5Nb2R1bGVOYW1lLCBhdXRoLk1vZHVsZU5hbWUsIGJhbmsuTW9kdWxlTmFtZSwKCQlzbGFzaGluZy5Nb2R1bGVOYW1lLCBnb3YuTW9kdWxlTmFtZSwgbWludC5Nb2R1bGVOYW1lLCBzdXBwbHkuTW9kdWxlTmFtZSwKCQljcmlzaXMuTW9kdWxlTmFtZSwgZ2VudXRpbC5Nb2R1bGVOYW1lLAoJKQoKCWFwcC5tbS5SZWdpc3RlckludmFyaWFudHMoJmFtcDthcHAuY3Jpc2lzS2VlcGVyKQoJYXBwLm1tLlJlZ2lzdGVyUm91dGVzKGFwcC5Sb3V0ZXIoKSwgYXBwLlF1ZXJ5Um91dGVyKCkpCgoJLy8gY3JlYXRlIHRoZSBzaW11bGF0aW9uIG1hbmFnZXIgYW5kIGRlZmluZSB0aGUgb3JkZXIgb2YgdGhlIG1vZHVsZXMgZm9yIGRldGVybWluaXN0aWMgc2ltdWxhdGlvbnMKCS8vCgkvLyBOT1RFOiBUaGlzIGlzIG5vdCByZXF1aXJlZCBmb3IgYXBwcyB0aGF0IGRvbid0IHVzZSB0aGUgc2ltdWxhdG9yIGZvciBmdXp6IHRlc3RpbmcKCS8vIHRyYW5zYWN0aW9ucy4KCWFwcC5zbSA9IG1vZHVsZS5OZXdTaW11bGF0aW9uTWFuYWdlcigKCQlhdXRoLk5ld0FwcE1vZHVsZShhcHAuYWNjb3VudEtlZXBlciksCgkJYmFuay5OZXdBcHBNb2R1bGUoYXBwLmJhbmtLZWVwZXIsIGFwcC5hY2NvdW50S2VlcGVyKSw="}})],1),e._v(" "),o("h3",{attrs:{id:"initchainer"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#initchainer"}},[e._v("#")]),e._v(" InitChainer")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("InitChainer")]),e._v(" is a function that initializes the state of the application from a genesis file (i.e. token balances of genesis accounts). It is called when the application receives the "),o("code",[e._v("InitChain")]),e._v(" message from the Tendermint engine, which happens when the node is started at "),o("code",[e._v("appBlockHeight == 0")]),e._v(" (i.e. on genesis). The application must set the "),o("code",[e._v("InitChainer")]),e._v(" in its "),o("a",{attrs:{href:"#constructor-function"}},[e._v("constructor")]),e._v(" via the "),o("a",{attrs:{href:"https://godoc.org/github.com/cosmos/cosmos-sdk/baseapp#BaseApp.SetInitChainer",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("SetInitChainer")]),o("OutboundLink")],1),e._v(" method.")]),e._v(" "),o("p",[e._v("In general, the "),o("code",[e._v("InitChainer")]),e._v(" is mostly composed of the "),o("RouterLink",{attrs:{to:"/building-modules/genesis.html#initgenesis"}},[o("code",[e._v("InitGenesis")])]),e._v(" function of each of the application's modules. This is done by calling the "),o("code",[e._v("InitGenesis")]),e._v(" function of the module manager, which in turn will call the "),o("code",[e._v("InitGenesis")]),e._v(" function of each of the modules it contains. Note that the order in which the modules' "),o("code",[e._v("InitGenesis")]),e._v(" functions must be called has to be set in the module manager using the "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html"}},[e._v("module manager's")]),e._v(" "),o("code",[e._v("SetOrderInitGenesis")]),e._v(" method. This is done in the "),o("a",{attrs:{href:"#application-constructor"}},[e._v("application's constructor")]),e._v(", and the "),o("code",[e._v("SetOrderInitGenesis")]),e._v(" has to be called before the "),o("code",[e._v("SetInitChainer")]),e._v(".")],1),e._v(" "),o("p",[e._v("See an example of an "),o("code",[e._v("InitChainer")]),e._v(" from "),o("a",{attrs:{href:"https://github.com/cosmos/gaia",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("gaia")]),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CWFwcC5Nb3VudFRyYW5zaWVudFN0b3Jlcyh0a2V5cykKCgkvLyBpbml0aWFsaXplIEJhc2VBcHAKCWFwcC5TZXRJbml0Q2hhaW5lcihhcHAuSW5pdENoYWluZXIpCglhcHAuU2V0QmVnaW5CbG9ja2VyKGFwcC5CZWdpbkJsb2NrZXIp"}})],1),e._v(" "),o("h3",{attrs:{id:"beginblocker-and-endblocker"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#beginblocker-and-endblocker"}},[e._v("#")]),e._v(" BeginBlocker and EndBlocker")]),e._v(" "),o("p",[e._v("The SDK offers developers the possibility to implement automatic execution of code as part of their application. This is implemented through two function called "),o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(". They are called when the application receives respectively the "),o("code",[e._v("BeginBlock")]),e._v(" and "),o("code",[e._v("EndBlock")]),e._v(" messages from the Tendermint engine, which happens at the beginning and at the end of each block. The application must set the "),o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(" in its "),o("a",{attrs:{href:"#constructor-function"}},[e._v("constructor")]),e._v(" via the "),o("a",{attrs:{href:"https://godoc.org/github.com/cosmos/cosmos-sdk/baseapp#BaseApp.SetBeginBlocker",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("SetBeginBlocker")]),o("OutboundLink")],1),e._v(" and "),o("a",{attrs:{href:"https://godoc.org/github.com/cosmos/cosmos-sdk/baseapp#BaseApp.SetEndBlocker",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("SetEndBlocker")]),o("OutboundLink")],1),e._v(" methods.")]),e._v(" "),o("p",[e._v("In general, the "),o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(" functions are mostly composed of the "),o("RouterLink",{attrs:{to:"/building-modules/beginblock-endblock.html"}},[o("code",[e._v("BeginBlock")]),e._v(" and "),o("code",[e._v("EndBlock")])]),e._v(" functions of each of the application's modules. This is done by calling the "),o("code",[e._v("BeginBlock")]),e._v(" and "),o("code",[e._v("EndBlock")]),e._v(" functions of the module manager, which in turn will call the "),o("code",[e._v("BeginBLock")]),e._v(" and "),o("code",[e._v("EndBlock")]),e._v(" functions of each of the modules it contains. Note that the order in which the modules' "),o("code",[e._v("BegingBlock")]),e._v(" and "),o("code",[e._v("EndBlock")]),e._v(" functions must be called has to be set in the module manager using the "),o("code",[e._v("SetOrderBeginBlock")]),e._v(" and "),o("code",[e._v("SetOrderEndBlock")]),e._v(" methods respectively. This is done via the "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html"}},[e._v("module manager")]),e._v(" in the "),o("a",{attrs:{href:"#application-constructor"}},[e._v("application's constructor")]),e._v(", and the "),o("code",[e._v("SetOrderBeginBlock")]),e._v(" and "),o("code",[e._v("SetOrderEndBlock")]),e._v(" methods have to be called before the "),o("code",[e._v("SetBeginBlocker")]),e._v(" and "),o("code",[e._v("SetEndBlocker")]),e._v(" functions.")],1),e._v(" "),o("p",[e._v("As a sidenote, it is important to remember that application-specific blockchains are deterministic. Developers must be careful not to introduce non-determinism in "),o("code",[e._v("BeginBlocker")]),e._v(" or "),o("code",[e._v("EndBlocker")]),e._v(", and must also be careful not to make them too computationally expensive, as "),o("RouterLink",{attrs:{to:"/basics/gas-fees.html"}},[e._v("gas")]),e._v(" does not constrain the cost of "),o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(" execution.")],1),e._v(" "),o("p",[e._v("See an example of "),o("code",[e._v("BeginBlocker")]),e._v(" and "),o("code",[e._v("EndBlocker")]),e._v(" functions from "),o("a",{attrs:{href:"https://github.com/cosmos/gaia",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("gaia")]),o("OutboundLink")],1)]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CQlnb3YuTmV3QXBwTW9kdWxlKGFwcC5nb3ZLZWVwZXIsIGFwcC5zdXBwbHlLZWVwZXIpLAoJCW1pbnQuTmV3QXBwTW9kdWxlKGFwcC5taW50S2VlcGVyKSwKCQlkaXN0ci5OZXdBcHBNb2R1bGUoYXBwLmRpc3RyS2VlcGVyLCBhcHAuc3VwcGx5S2VlcGVyKSwKCQlzdGFraW5nLk5ld0FwcE1vZHVsZShhcHAuc3Rha2luZ0tlZXBlciwgYXBwLmFjY291bnRLZWVwZXIsIGFwcC5zdXBwbHlLZWVwZXIpLAoJCXNsYXNoaW5nLk5ld0FwcE1vZHVsZShhcHAuc2xhc2hpbmdLZWVwZXIsIGFwcC5zdGFraW5nS2VlcGVyKSwKCSkKCglhcHAuc20uUmVnaXN0ZXJTdG9yZURlY29kZXJzKCkK"}})],1),e._v(" "),o("h3",{attrs:{id:"register-codec"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#register-codec"}},[e._v("#")]),e._v(" Register Codec")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("MakeCodec")]),e._v(" function is the last important function of the "),o("code",[e._v("app.go")]),e._v(" file. The goal of this function is to instantiate a "),o("RouterLink",{attrs:{to:"/core/encoding.html"}},[e._v("codec "),o("code",[e._v("cdc")])]),e._v(" (e.g. amino) initialize the codec of the SDK and each of the application's modules using the "),o("code",[e._v("RegisterCodec")]),e._v(" function.")],1),e._v(" "),o("p",[e._v("To register the application's modules, the "),o("code",[e._v("MakeCodec")]),e._v(" function calls "),o("code",[e._v("RegisterCodec")]),e._v(" on "),o("code",[e._v("ModuleBasics")]),e._v(". "),o("code",[e._v("ModuleBasics")]),e._v(" is a "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#basicmanager"}},[e._v("basic manager")]),e._v(" which lists all of the application's modules. It is instanciated in the "),o("code",[e._v("init()")]),e._v(" function, and only serves to easily register non-dependant elements of application's modules (such as codec). To learn more about the basic module manager, click "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#basicmanager"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("p",[e._v("See an example of a "),o("code",[e._v("MakeCodec")]),e._v(" from "),o("a",{attrs:{href:"https://github.com/cosmos/gaia",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("gaia")]),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CQlzdGFraW5nLkJvbmRlZFBvb2xOYW1lOiAgICB7c3VwcGx5LkJ1cm5lciwgc3VwcGx5LlN0YWtpbmd9LAoJCXN0YWtpbmcuTm90Qm9uZGVkUG9vbE5hbWU6IHtzdXBwbHkuQnVybmVyLCBzdXBwbHkuU3Rha2luZ30sCgkJZ292Lk1vZHVsZU5hbWU6ICAgICAgICAgICAge3N1cHBseS5CdXJuZXJ9LAoJfQopCgovLyBNYWtlQ29kZWMgY3JlYXRlcyB0aGUgYXBwbGljYXRpb24gY29kZWMuIFRoZSBjb2RlYyBpcyBzZWFsZWQgYmVmb3JlIGl0IGlz"}})],1),e._v(" "),o("h2",{attrs:{id:"modules"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#modules"}},[e._v("#")]),e._v(" Modules")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/building-modules/intro.html"}},[e._v("Modules")]),e._v(" are the heart and soul of SDK applications. They can be considered as state-machines within the state-machine. When a transaction is relayed from the underlying Tendermint engine via the ABCI to the application, it is routed by "),o("RouterLink",{attrs:{to:"/core/baseapp.html"}},[o("code",[e._v("baseapp")])]),e._v(" to the appropriate module in order to be processed. This paradigm enables developers to easily build complex state-machines, as most of the modules they need often already exist. For developers, most of the work involved in building an SDK application revolves around building custom modules required by their application that do not exist yet, and integrating them with modules that do already exist into one coherent application. In the application directory, the standard practice is to store modules in the "),o("code",[e._v("x/")]),e._v(" folder (not to be confused with the SDK's "),o("code",[e._v("x/")]),e._v(" folder, which contains already-built modules).")],1),e._v(" "),o("h3",{attrs:{id:"application-module-interface"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#application-module-interface"}},[e._v("#")]),e._v(" Application Module Interface")]),e._v(" "),o("p",[e._v("Modules must implement "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#application-module-interfaces"}},[e._v("interfaces")]),e._v(" defined in the Cosmos SDK, "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#appmodulebasic"}},[o("code",[e._v("AppModuleBasic")])]),e._v(" and "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#appmodule"}},[o("code",[e._v("AppModule")])]),e._v(". The former implements basic non-dependant elements of the module, such as the "),o("code",[e._v("codec")]),e._v(", while the latter handles the bulk of the module methods (including methods that require references to other modules' "),o("code",[e._v("keeper")]),e._v("s). Both the "),o("code",[e._v("AppModule")]),e._v(" and "),o("code",[e._v("AppModuleBasic")]),e._v(" types are defined in a file called "),o("code",[e._v("./module.go")]),e._v(".")],1),e._v(" "),o("p",[o("code",[e._v("AppModule")]),e._v(" exposes a collection of useful methods on the module that facilitates the composition of modules into a coherent application. These methods are are called from the "),o("code",[e._v("module manager")]),e._v("(../building-modules/module-manager.md#manager), which manages the application's collection of modules.")]),e._v(" "),o("h3",{attrs:{id:"message-types"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#message-types"}},[e._v("#")]),e._v(" Message Types")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#messages"}},[o("code",[e._v("Message")]),e._v("s")]),e._v(" are objects defined by each module that implement the "),o("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#messages"}},[o("code",[e._v("message")])]),e._v(" interface. Each "),o("RouterLink",{attrs:{to:"/core/transactions.html"}},[o("code",[e._v("transaction")])]),e._v(" contains one or multiple "),o("code",[e._v("messages")]),e._v(".")],1),e._v(" "),o("p",[e._v("When a valid block of transactions is received by the full-node, Tendermint relays each one to the application via "),o("a",{attrs:{href:"https://tendermint.com/docs/app-dev/abci-spec.html#delivertx",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("DeliverTx")]),o("OutboundLink")],1),e._v(". Then, the application handles the transaction:")]),e._v(" "),o("ol",[o("li",[e._v("Upon receiving the transaction, the application first unmarshalls it from "),o("code",[e._v("[]bytes")]),e._v(".")]),e._v(" "),o("li",[e._v("Then, it verifies a few things about the transaction like "),o("RouterLink",{attrs:{to:"/basics/app-anatomy.html#gas-fees.md#antehandler"}},[e._v("fee payment and signatures")]),e._v(" before extracting the message(s) contained in the transaction.")],1),e._v(" "),o("li",[e._v("With the "),o("code",[e._v("Type()")]),e._v(" method of the "),o("code",[e._v("message")]),e._v(", "),o("code",[e._v("baseapp")]),e._v(" is able to route it to the appropriate module's "),o("a",{attrs:{href:"#handler"}},[o("code",[e._v("handler")])]),e._v(" in order for it to be processed.")]),e._v(" "),o("li",[e._v("If the message is successfully processed, the state is updated.")])]),e._v(" "),o("p",[e._v("For a more detailed look at a transaction lifecycle, click "),o("RouterLink",{attrs:{to:"/basics/tx-lifecycle.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("p",[e._v("Module developers create custom message types when they build their own module. The general practice is to prefix the type declaration of the message with "),o("code",[e._v("Msg")]),e._v(". For example, the message type "),o("code",[e._v("MsgSend")]),e._v(" allows users to transfer tokens:")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gTXNnU2VuZCAtIGhpZ2ggbGV2ZWwgdHJhbnNhY3Rpb24gb2YgdGhlIGNvaW4gbW9kdWxlCnR5cGUgTXNnU2VuZCBzdHJ1Y3QgewoJRnJvbUFkZHJlc3Mgc2RrLkFjY0FkZHJlc3MgYGpzb246JnF1b3Q7ZnJvbV9hZGRyZXNzJnF1b3Q7IHlhbWw6JnF1b3Q7ZnJvbV9hZGRyZXNzJnF1b3Q7YAoJVG9BZGRyZXNzICAgc2RrLkFjY0FkZHJlc3MgYGpzb246JnF1b3Q7dG9fYWRkcmVzcyZxdW90OyB5YW1sOiZxdW90O3RvX2FkZHJlc3MmcXVvdDtgCglBbW91bnQgICAgICBzZGsuQ29pbnMgICAgICBganNvbjomcXVvdDthbW91bnQmcXVvdDsgeWFtbDomcXVvdDthbW91bnQmcXVvdDtgCn0="}})],1),e._v(" "),o("p",[e._v("It is processed by the "),o("code",[e._v("handler")]),e._v(" of the "),o("code",[e._v("bank")]),e._v(" module, which ultimately calls the "),o("code",[e._v("keeper")]),e._v(" of the "),o("code",[e._v("auth")]),e._v(" module in order to update the state.")]),e._v(" "),o("h3",{attrs:{id:"handler"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#handler"}},[e._v("#")]),e._v(" Handler")]),e._v(" "),o("p",[e._v("The "),o("RouterLink",{attrs:{to:"/building-modules/handler.html"}},[o("code",[e._v("handler")])]),e._v(" refers to the part of the module responsible for processing the "),o("code",[e._v("message")]),e._v(" after it is routed by "),o("code",[e._v("baseapp")]),e._v(". "),o("code",[e._v("handler")]),e._v(" functions of modules are only executed if the transaction is relayed from Tendermint by the "),o("code",[e._v("DeliverTx")]),e._v(" ABCI message. If the transaction is relayed by "),o("code",[e._v("CheckTx")]),e._v(", only stateless checks and fee-related stateful checks are performed. To better understand the difference between "),o("code",[e._v("DeliverTx")]),e._v("and "),o("code",[e._v("CheckTx")]),e._v(", as well as the difference between stateful and stateless checks, click "),o("RouterLink",{attrs:{to:"/basics/tx-lifecycle.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("p",[e._v("The "),o("code",[e._v("handler")]),e._v(" of a module is generally defined in a file called "),o("code",[e._v("handler.go")]),e._v(" and consists of:")]),e._v(" "),o("ul",[o("li",[e._v("A "),o("strong",[e._v("switch function")]),e._v(" "),o("code",[e._v("NewHandler")]),e._v(" to route the message to the appropriate "),o("code",[e._v("handler")]),e._v(" function. This function returns a "),o("code",[e._v("handler")]),e._v(" function, and is registered in the "),o("a",{attrs:{href:"#application-module-interface"}},[o("code",[e._v("AppModule")])]),e._v(" to be used in the application's module manager to initialize the "),o("RouterLink",{attrs:{to:"/core/baseapp.html#routing"}},[e._v("application's router")]),e._v(". Next is an example of such a switch from the "),o("a",{attrs:{href:"https://github.com/cosmos/sdk-tutorials/tree/master/nameservice",target:"_blank",rel:"noopener noreferrer"}},[e._v("nameservice tutorial"),o("OutboundLink")],1)],1)]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBOZXdRdWVyaWVyKGtlZXBlciBLZWVwZXIpIHNkay5RdWVyaWVyIHsKCXJldHVybiBmdW5jKGN0eCBzZGsuQ29udGV4dCwgcGF0aCBbXXN0cmluZywgcmVxIGFiY2kuUmVxdWVzdFF1ZXJ5KSAocmVzIFtdYnl0ZSwgZXJyIHNkay5FcnJvcikgewoJCXN3aXRjaCBwYXRoWzBdIHsKCQljYXNlIFF1ZXJ5UmVzb2x2ZToKCQkJcmV0dXJuIHF1ZXJ5UmVzb2x2ZShjdHgsIHBhdGhbMTpdLCByZXEsIGtlZXBlcikKCQljYXNlIFF1ZXJ5V2hvaXM6CgkJCXJldHVybiBxdWVyeVdob2lzKGN0eCwgcGF0aFsxOl0sIHJlcSwga2VlcGVyKQoJCWNhc2UgUXVlcnlOYW1lczoKCQkJcmV0dXJuIHF1ZXJ5TmFtZXMoY3R4LCByZXEsIGtlZXBlcikKCQlkZWZhdWx0OgoJCQlyZXR1cm4gbmlsLCBzZGsuRXJyVW5rbm93blJlcXVlc3QoJnF1b3Q7dW5rbm93biBuYW1lc2VydmljZSBxdWVyeSBlbmRwb2ludCZxdW90OykKCQl9Cgl9Cn0="}})],1),e._v(" "),o("ul",[o("li",[o("strong",[e._v("One handler function for each message type defined by the module")]),e._v(". Developers write the message processing logic in these functions. This generally involves doing stateful checks to ensure the message is valid and calling "),o("a",{attrs:{href:"#keeper"}},[o("code",[e._v("keeper")])]),e._v("'s methods to update the state.")])]),e._v(" "),o("p",[e._v("Handler functions return a result of type "),o("code",[e._v("sdk.Result")]),e._v(", which informs the application on whether the message was successfully processed:")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gUmVzdWx0IGlzIHRoZSB1bmlvbiBvZiBSZXNwb25zZUZvcm1hdCBhbmQgUmVzcG9uc2VDaGVja1R4Lgp0eXBlIFJlc3VsdCBzdHJ1Y3QgewoJLy8gQ29kZSBpcyB0aGUgcmVzcG9uc2UgY29kZSwgaXMgc3RvcmVkIGJhY2sgb24gdGhlIGNoYWluLgoJQ29kZSBDb2RlVHlwZQoKCS8vIENvZGVzcGFjZSBpcyB0aGUgc3RyaW5nIHJlZmVycmluZyB0byB0aGUgZG9tYWluIG9mIGFuIGVycm9yCglDb2Rlc3BhY2UgQ29kZXNwYWNlVHlwZQoKCS8vIERhdGEgaXMgYW55IGRhdGEgcmV0dXJuZWQgZnJvbSB0aGUgYXBwLgoJLy8gRGF0YSBoYXMgdG8gYmUgbGVuZ3RoIHByZWZpeGVkIGluIG9yZGVyIHRvIHNlcGFyYXRlCgkvLyByZXN1bHRzIGZyb20gbXVsdGlwbGUgbXNncyBleGVjdXRpb25zCglEYXRhIFtdYnl0ZQoKCS8vIExvZyBjb250YWlucyB0aGUgdHhzIGxvZyBpbmZvcm1hdGlvbi4gTk9URTogbm9uZGV0ZXJtaW5pc3RpYy4KCUxvZyBzdHJpbmcKCgkvLyBHYXNXYW50ZWQgaXMgdGhlIG1heGltdW0gdW5pdHMgb2Ygd29yayB3ZSBhbGxvdyB0aGlzIHR4IHRvIHBlcmZvcm0uCglHYXNXYW50ZWQgdWludDY0CgoJLy8gR2FzVXNlZCBpcyB0aGUgYW1vdW50IG9mIGdhcyBhY3R1YWxseSBjb25zdW1lZC4gTk9URTogdW5pbXBsZW1lbnRlZAoJR2FzVXNlZCB1aW50NjQKCgkvLyBFdmVudHMgY29udGFpbnMgYSBzbGljZSBvZiBFdmVudCBvYmplY3RzIHRoYXQgd2VyZSBlbWl0dGVkIGR1cmluZyBzb21lCgkvLyBleGVjdXRpb24uCglFdmVudHMgRXZlbnRzCn0="}})],1),e._v(" "),o("h3",{attrs:{id:"querier"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#querier"}},[e._v("#")]),e._v(" Querier")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/building-modules/querier.html"}},[o("code",[e._v("Queriers")])]),e._v(" are very similar to "),o("code",[e._v("handlers")]),e._v(", except they serve user queries to the state as opposed to processing transactions. A "),o("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#queries"}},[e._v("query")]),e._v(" is initiated from an "),o("a",{attrs:{href:"#interfaces"}},[e._v("interface")]),e._v(" by an end-user who provides a "),o("code",[e._v("queryRoute")]),e._v(" and some "),o("code",[e._v("data")]),e._v(". The query is then routed to the correct application's "),o("code",[e._v("querier")]),e._v(" by "),o("code",[e._v("baseapp")]),e._v("'s "),o("code",[e._v("handleQueryCustom")]),e._v(" method using "),o("code",[e._v("queryRoute")]),e._v(":")],1),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBoYW5kbGVRdWVyeUN1c3RvbShhcHAgKkJhc2VBcHAsIHBhdGggW11zdHJpbmcsIHJlcSBhYmNpLlJlcXVlc3RRdWVyeSkgKHJlcyBhYmNpLlJlc3BvbnNlUXVlcnkpIHsKCS8vIHBhdGhbMF0gc2hvdWxkIGJlICZxdW90O2N1c3RvbSZxdW90OyBiZWNhdXNlICZxdW90Oy9jdXN0b20mcXVvdDsgcHJlZml4IGlzIHJlcXVpcmVkIGZvciBrZWVwZXIKCS8vIHF1ZXJpZXMuCgkvLwoJLy8gVGhlIFF1ZXJ5Um91dGVyIHJvdXRlcyB1c2luZyBwYXRoWzFdLiBGb3IgZXhhbXBsZSwgaW4gdGhlIHBhdGgKCS8vICZxdW90O2N1c3RvbS9nb3YvcHJvcG9zYWwmcXVvdDssIFF1ZXJ5Um91dGVyIHJvdXRlcyB1c2luZyAmcXVvdDtnb3YmcXVvdDsuCglpZiBsZW4ocGF0aCkgJmx0OyAyIHx8IHBhdGhbMV0gPT0gJnF1b3Q7JnF1b3Q7IHsKCQlyZXR1cm4gc2RrLkVyclVua25vd25SZXF1ZXN0KCZxdW90O05vIHJvdXRlIGZvciBjdXN0b20gcXVlcnkgc3BlY2lmaWVkJnF1b3Q7KS5RdWVyeVJlc3VsdCgpCgl9CgoJcXVlcmllciA6PSBhcHAucXVlcnlSb3V0ZXIuUm91dGUocGF0aFsxXSkKCWlmIHF1ZXJpZXIgPT0gbmlsIHsKCQlyZXR1cm4gc2RrLkVyclVua25vd25SZXF1ZXN0KGZtdC5TcHJpbnRmKCZxdW90O25vIGN1c3RvbSBxdWVyaWVyIGZvdW5kIGZvciByb3V0ZSAlcyZxdW90OywgcGF0aFsxXSkpLlF1ZXJ5UmVzdWx0KCkKCX0KCgkvLyB3aGVuIGEgY2xpZW50IGRpZCBub3QgcHJvdmlkZSBhIHF1ZXJ5IGhlaWdodCwgbWFudWFsbHkgaW5qZWN0IHRoZSBsYXRlc3QKCWlmIHJlcS5IZWlnaHQgPT0gMCB7CgkJcmVxLkhlaWdodCA9IGFwcC5MYXN0QmxvY2tIZWlnaHQoKQoJfQoKCWlmIHJlcS5IZWlnaHQgJmx0Oz0gMSAmYW1wOyZhbXA7IHJlcS5Qcm92ZSB7CgkJcmV0dXJuIHNkay5FcnJJbnRlcm5hbCgmcXVvdDtjYW5ub3QgcXVlcnkgd2l0aCBwcm9vZiB3aGVuIGhlaWdodCAmbHQ7PSAxOyBwbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGhlaWdodCZxdW90OykuUXVlcnlSZXN1bHQoKQoJfQoKCWNhY2hlTVMsIGVyciA6PSBhcHAuY21zLkNhY2hlTXVsdGlTdG9yZVdpdGhWZXJzaW9uKHJlcS5IZWlnaHQpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gc2RrLkVyckludGVybmFsKAoJCQlmbXQuU3ByaW50ZigKCQkJCSZxdW90O2ZhaWxlZCB0byBsb2FkIHN0YXRlIGF0IGhlaWdodCAlZDsgJXMgKGxhdGVzdCBoZWlnaHQ6ICVkKSZxdW90OywKCQkJCXJlcS5IZWlnaHQsIGVyciwgYXBwLkxhc3RCbG9ja0hlaWdodCgpLAoJCQkpLAoJCSkuUXVlcnlSZXN1bHQoKQoJfQoKCS8vIGNhY2hlIHdyYXAgdGhlIGNvbW1pdC1tdWx0aXN0b3JlIGZvciBzYWZldHkKCWN0eCA6PSBzZGsuTmV3Q29udGV4dCgKCQljYWNoZU1TLCBhcHAuY2hlY2tTdGF0ZS5jdHguQmxvY2tIZWFkZXIoKSwgdHJ1ZSwgYXBwLmxvZ2dlciwKCSkuV2l0aE1pbkdhc1ByaWNlcyhhcHAubWluR2FzUHJpY2VzKQoKCS8vIFBhc3NlcyB0aGUgcmVzdCBvZiB0aGUgcGF0aCBhcyBhbiBhcmd1bWVudCB0byB0aGUgcXVlcmllci4KCS8vCgkvLyBGb3IgZXhhbXBsZSwgaW4gdGhlIHBhdGggJnF1b3Q7Y3VzdG9tL2dvdi9wcm9wb3NhbC90ZXN0JnF1b3Q7LCB0aGUgZ292IHF1ZXJpZXIgZ2V0cwoJLy8gW11zdHJpbmd7JnF1b3Q7cHJvcG9zYWwmcXVvdDssICZxdW90O3Rlc3QmcXVvdDt9IGFzIHRoZSBwYXRoLgoJcmVzQnl0ZXMsIHF1ZXJ5RXJyIDo9IHF1ZXJpZXIoY3R4LCBwYXRoWzI6XSwgcmVxKQoJaWYgcXVlcnlFcnIgIT0gbmlsIHsKCQlyZXR1cm4gYWJjaS5SZXNwb25zZVF1ZXJ5ewoJCQlDb2RlOiAgICAgIHVpbnQzMihxdWVyeUVyci5Db2RlKCkpLAoJCQlDb2Rlc3BhY2U6IHN0cmluZyhxdWVyeUVyci5Db2Rlc3BhY2UoKSksCgkJCUhlaWdodDogICAgcmVxLkhlaWdodCwKCQkJTG9nOiAgICAgICBxdWVyeUVyci5BQkNJTG9nKCksCgkJfQoJfQoKCXJldHVybiBhYmNpLlJlc3BvbnNlUXVlcnl7CgkJQ29kZTogICB1aW50MzIoc2RrLkNvZGVPSyksCgkJSGVpZ2h0OiByZXEuSGVpZ2h0LAoJCVZhbHVlOiAgcmVzQnl0ZXMsCgl9Cn0="}})],1),e._v(" "),o("p",[e._v("The "),o("code",[e._v("Querier")]),e._v(" of a module is defined in a file called "),o("code",[e._v("querier.go")]),e._v(", and consists of:")]),e._v(" "),o("ul",[o("li",[e._v("A "),o("strong",[e._v("switch function")]),e._v(" "),o("code",[e._v("NewQuerier")]),e._v(" to route the query to the appropriate "),o("code",[e._v("querier")]),e._v(" function. This function returns a "),o("code",[e._v("querier")]),e._v(" function, and is is registered in the "),o("a",{attrs:{href:"#application-module-interface"}},[o("code",[e._v("AppModule")])]),e._v(" to be used in the application's module manager to initialize the "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[e._v("application's query router")]),e._v(". See an example of such a switch from the "),o("a",{attrs:{href:"https://github.com/cosmos/sdk-tutorials/tree/master/nameservice",target:"_blank",rel:"noopener noreferrer"}},[e._v("nameservice tutorial"),o("OutboundLink")],1),e._v(":\n"),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBOZXdRdWVyaWVyKGtlZXBlciBLZWVwZXIpIHNkay5RdWVyaWVyIHsKCXJldHVybiBmdW5jKGN0eCBzZGsuQ29udGV4dCwgcGF0aCBbXXN0cmluZywgcmVxIGFiY2kuUmVxdWVzdFF1ZXJ5KSAocmVzIFtdYnl0ZSwgZXJyIHNkay5FcnJvcikgewoJCXN3aXRjaCBwYXRoWzBdIHsKCQljYXNlIFF1ZXJ5UmVzb2x2ZToKCQkJcmV0dXJuIHF1ZXJ5UmVzb2x2ZShjdHgsIHBhdGhbMTpdLCByZXEsIGtlZXBlcikKCQljYXNlIFF1ZXJ5V2hvaXM6CgkJCXJldHVybiBxdWVyeVdob2lzKGN0eCwgcGF0aFsxOl0sIHJlcSwga2VlcGVyKQoJCWNhc2UgUXVlcnlOYW1lczoKCQkJcmV0dXJuIHF1ZXJ5TmFtZXMoY3R4LCByZXEsIGtlZXBlcikKCQlkZWZhdWx0OgoJCQlyZXR1cm4gbmlsLCBzZGsuRXJyVW5rbm93blJlcXVlc3QoJnF1b3Q7dW5rbm93biBuYW1lc2VydmljZSBxdWVyeSBlbmRwb2ludCZxdW90OykKCQl9Cgl9Cn0="}})],1),e._v(" "),o("li",[o("strong",[e._v("One querier function for each data type defined by the module that needs to be queryable")]),e._v(". Developers write the query processing logic in these functions. This generally involves calling "),o("a",{attrs:{href:"#keeper"}},[o("code",[e._v("keeper")])]),e._v("'s methods to query the state and marshalling it to JSON.")])]),e._v(" "),o("h3",{attrs:{id:"keeper"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#keeper"}},[e._v("#")]),e._v(" Keeper")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[o("code",[e._v("Keepers")])]),e._v(" are the gatekeepers of their module's store(s). To read or write in a module's store, it is mandatory to go through one of its "),o("code",[e._v("keeper")]),e._v("'s methods. This is ensured by the "),o("RouterLink",{attrs:{to:"/core/ocap.html"}},[e._v("object-capabilities")]),e._v(" model of the Cosmos SDK. Only objects that hold the key to a store can access it, and only the module's "),o("code",[e._v("keeper")]),e._v(" should hold the key(s) to the module's store(s).")],1),e._v(" "),o("p",[o("code",[e._v("Keepers")]),e._v(" are generally defined in a file called "),o("code",[e._v("keeper.go")]),e._v(". It contains the "),o("code",[e._v("keeper")]),e._v("'s type definition and methods.")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("keeper")]),e._v(" type definition generally consists of:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("Key(s)")]),e._v(" to the module's store(s) in the multistore.")]),e._v(" "),o("li",[e._v("Reference to "),o("strong",[e._v("other module's "),o("code",[e._v("keepers")])]),e._v(". Only needed if the "),o("code",[e._v("keeper")]),e._v(" needs to access other module's store(s) (either to read or write from them).")]),e._v(" "),o("li",[e._v("A reference to the application's "),o("strong",[e._v("codec")]),e._v(". The "),o("code",[e._v("keeper")]),e._v(" needs it to marshal structs before storing them, or to unmarshal them when it retrieves them, because stores only accept "),o("code",[e._v("[]bytes")]),e._v(" as value.")])]),e._v(" "),o("p",[e._v("Along with the type definition, the next important component of the "),o("code",[e._v("keeper.go")]),e._v(" file is the "),o("code",[e._v("keeper")]),e._v("'s constructor function, "),o("code",[e._v("NewKeeper")]),e._v(". This function instantiates a new "),o("code",[e._v("keeper")]),e._v(" of the type defined above, with a "),o("code",[e._v("codec")]),e._v(", store "),o("code",[e._v("keys")]),e._v(" and potentially references to other modules' "),o("code",[e._v("keeper")]),e._v("s as parameters. The "),o("code",[e._v("NewKeeper")]),e._v(" function is called from the "),o("a",{attrs:{href:"#constructor-function"}},[e._v("application's constructor")]),e._v(". The rest of the file defines the "),o("code",[e._v("keeper")]),e._v("'s methods, primarily getters and setters.")]),e._v(" "),o("h3",{attrs:{id:"command-line-and-rest-interfaces"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#command-line-and-rest-interfaces"}},[e._v("#")]),e._v(" Command-Line and REST Interfaces")]),e._v(" "),o("p",[e._v("Each module defines command-line commands and REST routes to be exposed to end-user via the "),o("a",{attrs:{href:"#application-interfaces"}},[e._v("application's interfaces")]),e._v(". This enables end-users to create messages of the types defined in the module, or to query the subset of the state managed by the module.")]),e._v(" "),o("h4",{attrs:{id:"cli"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[e._v("#")]),e._v(" CLI")]),e._v(" "),o("p",[e._v("Generally, the "),o("RouterLink",{attrs:{to:"/building-modules/module-interfaces.html#cli"}},[e._v("commands related to a module")]),e._v(" are defined in a folder called "),o("code",[e._v("client/cli")]),e._v(" in the module's folder. The CLI divides commands in two category, transactions and queries, defined in "),o("code",[e._v("client/cli/tx.go")]),e._v(" and "),o("code",[e._v("client/cli/query.go")]),e._v(" respectively. Both commands are built on top of the "),o("a",{attrs:{href:"https://github.com/spf13/cobra",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cobra Library"),o("OutboundLink")],1),e._v(":")],1),e._v(" "),o("ul",[o("li",[e._v("Transactions commands let users generate new transactions so that they can be included in a block and eventually update the state. One command should be created for each "),o("a",{attrs:{href:"#message-types"}},[e._v("message type")]),e._v(" defined in the module. The command calls the constructor of the message with the parameters provided by the end-user, and wraps it into a transaction. The SDK handles signing and the addition of other transaction metadata.")]),e._v(" "),o("li",[e._v("Queries let users query the subset of the state defined by the module. Query commands forward queries to the "),o("RouterLink",{attrs:{to:"/core/baseapp.html#query-routing"}},[e._v("application's query router")]),e._v(", which routes them to the appropriate "),o("a",{attrs:{href:"#querier"}},[e._v("querier")]),e._v(" the "),o("code",[e._v("queryRoute")]),e._v(" parameter supplied.")],1)]),e._v(" "),o("h4",{attrs:{id:"rest"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#rest"}},[e._v("#")]),e._v(" REST")]),e._v(" "),o("p",[e._v("The "),o("RouterLink",{attrs:{to:"/building-modules/module-interfaces.html#rest"}},[e._v("module's REST interface")]),e._v(" lets users generate transactions and query the state through REST calls to the application's "),o("RouterLink",{attrs:{to:"/core/node.html#lcd"}},[e._v("light client daemon")]),e._v(" (LCD). REST routes are defined in a file "),o("code",[e._v("client/rest/rest.go")]),e._v(", which is composed of:")],1),e._v(" "),o("ul",[o("li",[e._v("A "),o("code",[e._v("RegisterRoutes")]),e._v(" function, which registers each route defined in the file. This function is called from the "),o("a",{attrs:{href:"#application-interfaces"}},[e._v("main application's interface")]),e._v(" for each module used within the application. The router used in the SDK is "),o("a",{attrs:{href:"https://github.com/gorilla/mux",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gorilla's mux"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("li",[e._v("Custom request type definitions for each query or transaction creation function that needs to be exposed. These custom request types build on the base "),o("code",[e._v("request")]),e._v(" type of the Cosmos SDK:\n"),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gQmFzZVJlcSBkZWZpbmVzIGEgc3RydWN0dXJlIHRoYXQgY2FuIGJlIGVtYmVkZGVkIGluIG90aGVyIHJlcXVlc3Qgc3RydWN0dXJlcwovLyB0aGF0IGFsbCBzaGFyZSBjb21tb24gJnF1b3Q7YmFzZSZxdW90OyBmaWVsZHMuCnR5cGUgQmFzZVJlcSBzdHJ1Y3QgewoJRnJvbSAgICAgICAgICBzdHJpbmcgICAgICAgYGpzb246JnF1b3Q7ZnJvbSZxdW90O2AKCU1lbW8gICAgICAgICAgc3RyaW5nICAgICAgIGBqc29uOiZxdW90O21lbW8mcXVvdDtgCglDaGFpbklEICAgICAgIHN0cmluZyAgICAgICBganNvbjomcXVvdDtjaGFpbl9pZCZxdW90O2AKCUFjY291bnROdW1iZXIgdWludDY0ICAgICAgIGBqc29uOiZxdW90O2FjY291bnRfbnVtYmVyJnF1b3Q7YAoJU2VxdWVuY2UgICAgICB1aW50NjQgICAgICAgYGpzb246JnF1b3Q7c2VxdWVuY2UmcXVvdDtgCglGZWVzICAgICAgICAgIHNkay5Db2lucyAgICBganNvbjomcXVvdDtmZWVzJnF1b3Q7YAoJR2FzUHJpY2VzICAgICBzZGsuRGVjQ29pbnMgYGpzb246JnF1b3Q7Z2FzX3ByaWNlcyZxdW90O2AKCUdhcyAgICAgICAgICAgc3RyaW5nICAgICAgIGBqc29uOiZxdW90O2dhcyZxdW90O2AKCUdhc0FkanVzdG1lbnQgc3RyaW5nICAgICAgIGBqc29uOiZxdW90O2dhc19hZGp1c3RtZW50JnF1b3Q7YAoJU2ltdWxhdGUgICAgICBib29sICAgICAgICAgYGpzb246JnF1b3Q7c2ltdWxhdGUmcXVvdDtgCn0="}})],1),e._v(" "),o("li",[e._v("One handler function for each request that can be routed to the given module. These functions implement the core logic necessary to serve the request.")])]),e._v(" "),o("h2",{attrs:{id:"application-interface"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#application-interface"}},[e._v("#")]),e._v(" Application Interface")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/interfaces/interfaces-intro.html"}},[e._v("Interfaces")]),e._v(" let end-users interact with full-node clients. This means querying data from the full-node or creating and sending new transactions to be relayed by the full-node and eventually included in a block.")],1),e._v(" "),o("p",[e._v("The main interface is the "),o("RouterLink",{attrs:{to:"/interfaces/cli.html"}},[e._v("Command-Line Interface")]),e._v(". The CLI of an SDK application is built by aggregating "),o("a",{attrs:{href:"#cli"}},[e._v("CLI commands")]),e._v(" defined in each of the modules used by the application. The CLI of an application generally has the "),o("code",[e._v("-cli")]),e._v(" suffix (e.g. "),o("code",[e._v("appcli")]),e._v("), and defined in a file called "),o("code",[e._v("cmd/appcli/main.go")]),e._v(". The file contains:")],1),e._v(" "),o("ul",[o("li",[o("strong",[e._v("A "),o("code",[e._v("main()")]),e._v(" function")]),e._v(", which is executed to build the "),o("code",[e._v("appcli")]),e._v(" interface client. This function prepares each command and adds them to the "),o("code",[e._v("rootCmd")]),e._v(" before building them. At the root of "),o("code",[e._v("appCli")]),e._v(", the function adds generic commands like "),o("code",[e._v("status")]),e._v(", "),o("code",[e._v("keys")]),e._v(" and "),o("code",[e._v("config")]),e._v(", query commands, tx commands and "),o("code",[e._v("rest-server")]),e._v(".")]),e._v(" "),o("li",[o("strong",[e._v("Query commands")]),e._v(" are added by calling the "),o("code",[e._v("queryCmd")]),e._v(" function, also defined in "),o("code",[e._v("appcli/main.go")]),e._v(". This function returns a Cobra command that contains the query commands defined in each of the application's modules (passed as an array of "),o("code",[e._v("sdk.ModuleClients")]),e._v(" from the "),o("code",[e._v("main()")]),e._v(" function), as well as some other lower level query commands such as block or validator queries. Query command are called by using the command "),o("code",[e._v("appcli query [query]")]),e._v(" of the CLI.")]),e._v(" "),o("li",[o("strong",[e._v("Transaction commands")]),e._v(" are added by calling the "),o("code",[e._v("txCmd")]),e._v(" function. Similar to "),o("code",[e._v("queryCmd")]),e._v(", the function  returns a Cobra command that contains the tx commands defined in each of the application's modules, as well as lower level tx commands like transaction signing or broadcasting. Tx commands are called by using the command "),o("code",[e._v("appcli tx [tx]")]),e._v(" of the CLI.")]),e._v(" "),o("li",[o("strong",[e._v("A "),o("code",[e._v("registerRoutes")]),e._v(" function")]),e._v(", which is called from the "),o("code",[e._v("main()")]),e._v(" function when initializing the "),o("RouterLink",{attrs:{to:"/core/node.html#lcd"}},[e._v("application's light-client daemon (LCD)")]),e._v(" (i.e. "),o("code",[e._v("rest-server")]),e._v("). "),o("code",[e._v("registerRoutes")]),e._v(" calls the "),o("code",[e._v("RegisterRoutes")]),e._v(" function of each of the application's module, thereby registering the routes of the module to the lcd's router. The LCD can be started by running the following command "),o("code",[e._v("appcli rest-server")]),e._v(".")],1)]),e._v(" "),o("p",[e._v("See an example of an application's main command-line file from the "),o("a",{attrs:{href:"https://github.com/cosmos/sdk-tutorials/tree/master/nameservice",target:"_blank",rel:"noopener noreferrer"}},[e._v("nameservice tutorial"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBtYWluCgppbXBvcnQgKAoJJnF1b3Q7b3MmcXVvdDsKCSZxdW90O3BhdGgmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudCZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQva2V5cyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQvbGNkJnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudC9ycGMmcXVvdDsKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3ZlcnNpb24mcXVvdDsKCWF1dGhjbWQgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay94L2F1dGgvY2xpZW50L2NsaSZxdW90OwoJYXV0aHJlc3QgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay94L2F1dGgvY2xpZW50L3Jlc3QmcXVvdDsKCWJhbmtjbWQgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay94L2JhbmsvY2xpZW50L2NsaSZxdW90OwoJYXBwICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL3Nkay10dXRvcmlhbHMvbmFtZXNlcnZpY2UmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vc3BmMTMvY29icmEmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vc3BmMTMvdmlwZXImcXVvdDsKCWFtaW5vICZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC9nby1hbWlubyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS90ZW5kZXJtaW50L3RlbmRlcm1pbnQvbGlicy9jbGkmcXVvdDsKKQoKZnVuYyBtYWluKCkgewoJY29icmEuRW5hYmxlQ29tbWFuZFNvcnRpbmcgPSBmYWxzZQoKCWNkYyA6PSBhcHAuTWFrZUNvZGVjKCkKCgkvLyBSZWFkIGluIHRoZSBjb25maWd1cmF0aW9uIGZpbGUgZm9yIHRoZSBzZGsKCWNvbmZpZyA6PSBzZGsuR2V0Q29uZmlnKCkKCWNvbmZpZy5TZXRCZWNoMzJQcmVmaXhGb3JBY2NvdW50KHNkay5CZWNoMzJQcmVmaXhBY2NBZGRyLCBzZGsuQmVjaDMyUHJlZml4QWNjUHViKQoJY29uZmlnLlNldEJlY2gzMlByZWZpeEZvclZhbGlkYXRvcihzZGsuQmVjaDMyUHJlZml4VmFsQWRkciwgc2RrLkJlY2gzMlByZWZpeFZhbFB1YikKCWNvbmZpZy5TZXRCZWNoMzJQcmVmaXhGb3JDb25zZW5zdXNOb2RlKHNkay5CZWNoMzJQcmVmaXhDb25zQWRkciwgc2RrLkJlY2gzMlByZWZpeENvbnNQdWIpCgljb25maWcuU2VhbCgpCgoJcm9vdENtZCA6PSAmYW1wO2NvYnJhLkNvbW1hbmR7CgkJVXNlOiAgICZxdW90O25zY2xpJnF1b3Q7LAoJCVNob3J0OiAmcXVvdDtuYW1lc2VydmljZSBDbGllbnQmcXVvdDssCgl9CgoJLy8gQWRkIC0tY2hhaW4taWQgdG8gcGVyc2lzdGVudCBmbGFncyBhbmQgbWFyayBpdCByZXF1aXJlZAoJcm9vdENtZC5QZXJzaXN0ZW50RmxhZ3MoKS5TdHJpbmcoY2xpZW50LkZsYWdDaGFpbklELCAmcXVvdDsmcXVvdDssICZxdW90O0NoYWluIElEIG9mIHRlbmRlcm1pbnQgbm9kZSZxdW90OykKCXJvb3RDbWQuUGVyc2lzdGVudFByZVJ1bkUgPSBmdW5jKF8gKmNvYnJhLkNvbW1hbmQsIF8gW11zdHJpbmcpIGVycm9yIHsKCQlyZXR1cm4gaW5pdENvbmZpZyhyb290Q21kKQoJfQoKCS8vIENvbnN0cnVjdCBSb290IENvbW1hbmQKCXJvb3RDbWQuQWRkQ29tbWFuZCgKCQlycGMuU3RhdHVzQ29tbWFuZCgpLAoJCWNsaWVudC5Db25maWdDbWQoYXBwLkRlZmF1bHRDTElIb21lKSwKCQlxdWVyeUNtZChjZGMpLAoJCXR4Q21kKGNkYyksCgkJY2xpZW50LkxpbmVCcmVhaywKCQlsY2QuU2VydmVDb21tYW5kKGNkYywgcmVnaXN0ZXJSb3V0ZXMpLAoJCWNsaWVudC5MaW5lQnJlYWssCgkJa2V5cy5Db21tYW5kcygpLAoJCWNsaWVudC5MaW5lQnJlYWssCgkJdmVyc2lvbi5DbWQsCgkJY2xpZW50Lk5ld0NvbXBsZXRpb25DbWQocm9vdENtZCwgdHJ1ZSksCgkpCgoJZXhlY3V0b3IgOj0gY2xpLlByZXBhcmVNYWluQ21kKHJvb3RDbWQsICZxdW90O05TJnF1b3Q7LCBhcHAuRGVmYXVsdENMSUhvbWUpCgllcnIgOj0gZXhlY3V0b3IuRXhlY3V0ZSgpCglpZiBlcnIgIT0gbmlsIHsKCQlwYW5pYyhlcnIpCgl9Cn0KCmZ1bmMgcmVnaXN0ZXJSb3V0ZXMocnMgKmxjZC5SZXN0U2VydmVyKSB7CgljbGllbnQuUmVnaXN0ZXJSb3V0ZXMocnMuQ2xpQ3R4LCBycy5NdXgpCglhdXRocmVzdC5SZWdpc3RlclR4Um91dGVzKHJzLkNsaUN0eCwgcnMuTXV4KQoJYXBwLk1vZHVsZUJhc2ljcy5SZWdpc3RlclJFU1RSb3V0ZXMocnMuQ2xpQ3R4LCBycy5NdXgpCn0KCmZ1bmMgcXVlcnlDbWQoY2RjICphbWluby5Db2RlYykgKmNvYnJhLkNvbW1hbmQgewoJcXVlcnlDbWQgOj0gJmFtcDtjb2JyYS5Db21tYW5kewoJCVVzZTogICAgICZxdW90O3F1ZXJ5JnF1b3Q7LAoJCUFsaWFzZXM6IFtdc3RyaW5neyZxdW90O3EmcXVvdDt9LAoJCVNob3J0OiAgICZxdW90O1F1ZXJ5aW5nIHN1YmNvbW1hbmRzJnF1b3Q7LAoJfQoKCXF1ZXJ5Q21kLkFkZENvbW1hbmQoCgkJYXV0aGNtZC5HZXRBY2NvdW50Q21kKGNkYyksCgkJY2xpZW50LkxpbmVCcmVhaywKCQlycGMuVmFsaWRhdG9yQ29tbWFuZChjZGMpLAoJCXJwYy5CbG9ja0NvbW1hbmQoKSwKCQlhdXRoY21kLlF1ZXJ5VHhzQnlFdmVudHNDbWQoY2RjKSwKCQlhdXRoY21kLlF1ZXJ5VHhDbWQoY2RjKSwKCQljbGllbnQuTGluZUJyZWFrLAoJKQoKCS8vIGFkZCBtb2R1bGVzJyBxdWVyeSBjb21tYW5kcwoJYXBwLk1vZHVsZUJhc2ljcy5BZGRRdWVyeUNvbW1hbmRzKHF1ZXJ5Q21kLCBjZGMpCgoJcmV0dXJuIHF1ZXJ5Q21kCn0KCmZ1bmMgdHhDbWQoY2RjICphbWluby5Db2RlYykgKmNvYnJhLkNvbW1hbmQgewoJdHhDbWQgOj0gJmFtcDtjb2JyYS5Db21tYW5kewoJCVVzZTogICAmcXVvdDt0eCZxdW90OywKCQlTaG9ydDogJnF1b3Q7VHJhbnNhY3Rpb25zIHN1YmNvbW1hbmRzJnF1b3Q7LAoJfQoKCXR4Q21kLkFkZENvbW1hbmQoCgkJYmFua2NtZC5TZW5kVHhDbWQoY2RjKSwKCQljbGllbnQuTGluZUJyZWFrLAoJCWF1dGhjbWQuR2V0U2lnbkNvbW1hbmQoY2RjKSwKCQlhdXRoY21kLkdldE11bHRpU2lnbkNvbW1hbmQoY2RjKSwKCQljbGllbnQuTGluZUJyZWFrLAoJCWF1dGhjbWQuR2V0QnJvYWRjYXN0Q29tbWFuZChjZGMpLAoJCWF1dGhjbWQuR2V0RW5jb2RlQ29tbWFuZChjZGMpLAoJCWNsaWVudC5MaW5lQnJlYWssCgkpCgoJLy8gYWRkIG1vZHVsZXMnIHR4IGNvbW1hbmRzCglhcHAuTW9kdWxlQmFzaWNzLkFkZFR4Q29tbWFuZHModHhDbWQsIGNkYykKCglyZXR1cm4gdHhDbWQKfQoKZnVuYyBpbml0Q29uZmlnKGNtZCAqY29icmEuQ29tbWFuZCkgZXJyb3IgewoJaG9tZSwgZXJyIDo9IGNtZC5QZXJzaXN0ZW50RmxhZ3MoKS5HZXRTdHJpbmcoY2xpLkhvbWVGbGFnKQoJaWYgZXJyICE9IG5pbCB7CgkJcmV0dXJuIGVycgoJfQoKCWNmZ0ZpbGUgOj0gcGF0aC5Kb2luKGhvbWUsICZxdW90O2NvbmZpZyZxdW90OywgJnF1b3Q7Y29uZmlnLnRvbWwmcXVvdDspCglpZiBfLCBlcnIgOj0gb3MuU3RhdChjZmdGaWxlKTsgZXJyID09IG5pbCB7CgkJdmlwZXIuU2V0Q29uZmlnRmlsZShjZmdGaWxlKQoKCQlpZiBlcnIgOj0gdmlwZXIuUmVhZEluQ29uZmlnKCk7IGVyciAhPSBuaWwgewoJCQlyZXR1cm4gZXJyCgkJfQoJfQoJaWYgZXJyIDo9IHZpcGVyLkJpbmRQRmxhZyhjbGllbnQuRmxhZ0NoYWluSUQsIGNtZC5QZXJzaXN0ZW50RmxhZ3MoKS5Mb29rdXAoY2xpZW50LkZsYWdDaGFpbklEKSk7IGVyciAhPSBuaWwgewoJCXJldHVybiBlcnIKCX0KCWlmIGVyciA6PSB2aXBlci5CaW5kUEZsYWcoY2xpLkVuY29kaW5nRmxhZywgY21kLlBlcnNpc3RlbnRGbGFncygpLkxvb2t1cChjbGkuRW5jb2RpbmdGbGFnKSk7IGVyciAhPSBuaWwgewoJCXJldHVybiBlcnIKCX0KCXJldHVybiB2aXBlci5CaW5kUEZsYWcoY2xpLk91dHB1dEZsYWcsIGNtZC5QZXJzaXN0ZW50RmxhZ3MoKS5Mb29rdXAoY2xpLk91dHB1dEZsYWcpKQp9Cg=="}})],1),e._v(" "),o("h2",{attrs:{id:"dependencies-and-makefile"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-and-makefile"}},[e._v("#")]),e._v(" Dependencies and Makefile")]),e._v(" "),o("p",[e._v("This section is optional, as developers are free to choose their dependency manager and project building method. That said, the current most used framework for versioning control is "),o("a",{attrs:{href:"https://github.com/golang/go/wiki/Modules",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("go.mod")]),o("OutboundLink")],1),e._v(". It ensures each of the libraries used throughout the application are imported with the correct version. See an example from the "),o("a",{attrs:{href:"https://github.com/cosmos/sdk-tutorials/tree/master/nameservice",target:"_blank",rel:"noopener noreferrer"}},[e._v("nameservice tutorial"),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"false",base64:"bW9kdWxlIGdpdGh1Yi5jb20vY29zbW9zL3Nkay1hcHBsaWNhdGlvbi10dXRvcmlhbAoKZ28gMS4xMwoKcmVxdWlyZSAoCglnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrIHYwLjM3LjMKCWdpdGh1Yi5jb20vZ29yaWxsYS9tdXggdjEuNy4zCglnaXRodWIuY29tL21hdHRuL2dvLWlzYXR0eSB2MC4wLjcgLy8gaW5kaXJlY3QKCWdpdGh1Yi5jb20vc3BmMTMvYWZlcm8gdjEuMi4yIC8vIGluZGlyZWN0CglnaXRodWIuY29tL3NwZjEzL2NvYnJhIHYwLjAuNQoJZ2l0aHViLmNvbS9zcGYxMy92aXBlciB2MS40LjAKCWdpdGh1Yi5jb20vc3RyZXRjaHIvdGVzdGlmeSB2MS40LjAKCWdpdGh1Yi5jb20vdGVuZGVybWludC9nby1hbWlubyB2MC4xNS4xCglnaXRodWIuY29tL3RlbmRlcm1pbnQvdGVuZGVybWludCB2MC4zMi42CglnaXRodWIuY29tL3RlbmRlcm1pbnQvdG0tZGIgdjAuMi4wCglnb2xhbmcub3JnL3gvc3lzIHYwLjAuMC0yMDE5MDMyOTA0NDczMy05ZWIxYmZhMWNlNjUgLy8gaW5kaXJlY3QKCWdvb2dsZS5nb2xhbmcub3JnL2dlbnByb3RvIHYwLjAuMC0yMDE5MDMyNzEyNTY0My1kODMxZDY1ZmUxN2QgLy8gaW5kaXJlY3QKKQ=="}})],1),e._v(" "),o("p",[e._v("For building the application, a "),o("a",{attrs:{href:"https://en.wikipedia.org/wiki/Makefile",target:"_blank",rel:"noopener noreferrer"}},[e._v("Makefile"),o("OutboundLink")],1),e._v(" is generally used. The Makefile primarily ensures that the "),o("code",[e._v("go.mod")]),e._v(" is run before building the two entrypoints to the application, "),o("a",{attrs:{href:"#node-client"}},[o("code",[e._v("appd")])]),e._v(" and "),o("a",{attrs:{href:"#application-interface"}},[o("code",[e._v("appcli")])]),e._v(". See an example of Makefile from the "),o("a",{attrs:{href:""}},[e._v("nameservice tutorial")])]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"false",base64:"UEFDS0FHRVM9JChzaGVsbCBnbyBsaXN0IC4vLi4uIHwgZ3JlcCAtdiAnL3NpbXVsYXRpb24nKQoKVkVSU0lPTiA6PSAkKHNoZWxsIGVjaG8gJChzaGVsbCBnaXQgZGVzY3JpYmUgLS10YWdzKSB8IHNlZCAncy9edi8vJykKQ09NTUlUIDo9ICQoc2hlbGwgZ2l0IGxvZyAtMSAtLWZvcm1hdD0nJUgnKQoKbGRmbGFncyA9IC1YIGdpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdmVyc2lvbi5OYW1lPU5hbWVTZXJ2aWNlIFwKCS1YIGdpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdmVyc2lvbi5TZXJ2ZXJOYW1lPW5zZCBcCgktWCBnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3ZlcnNpb24uQ2xpZW50TmFtZT1uc2NsaSBcCgktWCBnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3ZlcnNpb24uVmVyc2lvbj0kKFZFUlNJT04pIFwKCS1YIGdpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdmVyc2lvbi5Db21taXQ9JChDT01NSVQpIAoKQlVJTERfRkxBR1MgOj0gLWxkZmxhZ3MgJyQobGRmbGFncyknCgppbmNsdWRlIE1ha2VmaWxlLmxlZGdlcgphbGw6IGluc3RhbGwKCmluc3RhbGw6IGdvLnN1bQoJCWdvIGluc3RhbGwgLW1vZD1yZWFkb25seSAkKEJVSUxEX0ZMQUdTKSAuL2NtZC9uc2QKCQlnbyBpbnN0YWxsIC1tb2Q9cmVhZG9ubHkgJChCVUlMRF9GTEFHUykgLi9jbWQvbnNjbGkKCmdvLnN1bTogZ28ubW9kCgkJQGVjaG8gJnF1b3Q7LS0mZ3Q7IEVuc3VyZSBkZXBlbmRlbmNpZXMgaGF2ZSBub3QgYmVlbiBtb2RpZmllZCZxdW90OwoJCUdPMTExTU9EVUxFPW9uIGdvIG1vZCB2ZXJpZnkKCnRlc3Q6CglAZ28gdGVzdCAtbW9kPXJlYWRvbmx5ICQoUEFDS0FHRVMp"}})],1),e._v(" "),o("h2",{attrs:{hide:"",id:"next"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" Next")]),e._v(" "),o("p",{attrs:{hide:""}},[e._v("Learn more about the "),o("RouterLink",{attrs:{to:"/basics/tx-lifecycle.html"}},[e._v("Lifecycle of a transaction")])],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);